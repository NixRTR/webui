import{j as e,M as i,A as N,L as E,T as k,B as p}from"./ui-vendor-CLzVGpw3.js";import{a as o}from"./react-vendor-4URc7N9U.js";import{a as H}from"./index-Bg1dQ8cB.js";function C({show:d,onClose:c,currentHostname:m,dynamicDomain:l,network:j,macAddress:g,ipAddress:v,onSaved:y}){const[t,u]=o.useState(m),[n,h]=o.useState(!1),[x,a]=o.useState(null);o.useEffect(()=>{d&&(u(m),a(null))},[d,m]);const f=t.trim()?l?`${t.trim()}.${l}`:t.trim():"",b=async()=>{const r=t.trim();if(!r){a("Hostname is required.");return}if(r.includes(".")){a("Use a short hostname without dots (the domain is added automatically).");return}a(null),h(!0);try{await H.setDeviceHostname(g,r,j,v),y(),c()}catch(s){const S=s&&typeof s=="object"&&"response"in s&&s.response&&typeof s.response=="object"&&"data"in s.response?String(s.response.data?.detail):s instanceof Error?s.message:"Failed to save hostname";a(S)}finally{h(!1)}};return e.jsxs(i,{show:d,onClose:c,size:"md",children:[e.jsx(i.Header,{children:"Edit hostname"}),e.jsx(i.Body,{children:e.jsxs("div",{className:"space-y-4",children:[x&&e.jsx(N,{color:"failure",onDismiss:()=>a(null),children:x}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"hostname",value:"Hostname"}),e.jsx(k,{id:"hostname",value:t,onChange:r=>u(r.target.value),placeholder:"e.g. myserver",className:"mt-1",disabled:n})]}),f&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Full DNS name: ",e.jsx("span",{className:"font-mono text-gray-900 dark:text-white",children:f})]}),l==null||l===""?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Dynamic DNS is disabled for this network. The hostname will still be saved and used for the device."}):null]})}),e.jsxs(i.Footer,{children:[e.jsx(p,{color:"blue",onClick:b,disabled:n||!t.trim(),children:n?"Saving...":"Save"}),e.jsx(p,{color:"gray",onClick:c,disabled:n,children:"Cancel"})]})]})}export{C as H};
