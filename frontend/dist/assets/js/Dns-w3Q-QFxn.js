import{j as e,t as xs,A as x,C as $e,a as c,B as n,u as Ke,v as Ye,w as I,q as V,b as l,c as u,x as p,M as o,L as m,T as b,S as De,y as ms}from"./ui-vendor-XgbUf-17.js";import{u as hs,a as r}from"./react-vendor-DIDCmA_u.js";import{u as us,S as js,N as gs}from"./useMetrics-Ci0MPOhy.js";import{a as d}from"./index-TxezpQ-Z.js";import{H as ys}from"./HostnameEditModal-CmRbQPVx.js";import"./http-vendor-B9ygI19o.js";function ks(){const q=localStorage.getItem("access_token"),Qe=localStorage.getItem("username")||"Unknown",$=hs(),[_e,He]=r.useState(!1),[Re,Ue]=r.useState([]),[We,Ee]=r.useState(!0),[Ae,j]=r.useState(null),[K,Ge]=r.useState({}),[Fe,Me]=r.useState(null),[Xe,Te]=r.useState(!1),[E,Y]=r.useState(null),[w,Q]=r.useState(""),[U,W]=r.useState("homelab"),[G,X]=r.useState(!0),[J,ee]=r.useState(""),[se,ae]=r.useState(""),[le,te]=r.useState(!0),[A,re]=r.useState("fully_hosted"),[F,g]=r.useState(!1),[Ze,k]=r.useState(null),[Je,ze]=r.useState(!1),[es,Pe]=r.useState(!1),[i,ne]=r.useState(null),[ie,Oe]=r.useState([]),[oe,ce]=r.useState(null),[C,de]=r.useState(""),[S,xe]=r.useState("A"),[D,me]=r.useState(""),[he,ue]=r.useState(""),[je,ge]=r.useState(!0),[M,f]=r.useState(null),[ss,y]=r.useState(!1),[as,_]=r.useState(!1),[T,H]=r.useState(null),[ye,fe]=r.useState(null),[Ne,ls]=r.useState([]),[Be,ts]=r.useState({homelab:[],lan:[]}),[Le,Ie]=r.useState(!1),[Z,z]=r.useState(null),[R,ve]=r.useState(null),[pe,be]=r.useState(null),{connectionStatus:rs}=us(q);r.useEffect(()=>{if(!q){$("/login");return}we(),qe(),Ve()},[q,$]);const Ve=async()=>{Ie(!0),z(null);try{const[s,a,t]=await Promise.all([d.getDhcpNetworks(),d.getDnsDynamicEntries("homelab"),d.getDnsDynamicEntries("lan")]);ls(s),ts({homelab:a,lan:t})}catch(s){const a=s&&typeof s=="object"&&"response"in s&&s.response&&typeof s.response=="object"&&"data"in s.response?String(s.response.data?.detail):s instanceof Error?s.message:"Failed to load dynamic DNS data";z(a)}finally{Ie(!1)}},we=async()=>{Ee(!0),j(null);try{const s=await d.getDnsZones();Ue(s)}catch(s){j(s?.response?.data?.detail||s.message||"Failed to load DNS zones")}finally{Ee(!1)}},qe=async()=>{try{const[s,a]=await Promise.all([d.getDnsServiceStatus("homelab"),d.getDnsServiceStatus("lan")]);Ge({homelab:s,lan:a})}catch(s){console.error("Failed to fetch DNS service statuses:",s)}},h=async(s,a)=>{const t=`${s}-${a}`;Me(t);try{await d.controlDnsService(s,a),setTimeout(()=>{qe()},1e3)}catch(v){j(v?.response?.data?.detail||v.message||`Failed to ${a} DNS service`)}finally{Me(null)}},P=s=>{const a=K[s.network];return!a||!a.exists?{is_active:!1,is_enabled:!1}:{is_active:a.is_active,is_enabled:a.is_enabled}},O=async(s,a)=>{try{const t=await d.getDnsRecords(s,a);Oe(t)}catch(t){j(t?.response?.data?.detail||t.message||"Failed to load DNS records")}},ns=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("username"),$("/login")},N=(s,a)=>{s?(Y(s),Q(s.name),W(s.network),X(s.authoritative),ee(s.forward_to||""),ae(s.delegate_to||""),te(s.enabled),re(s.hosting_mode||"fully_hosted")):(Y(null),Q(""),W(a||"homelab"),X(!0),ee(""),ae(""),te(!0),re("fully_hosted")),k(null),Te(!0)},ke=()=>{Te(!1),Y(null),k(null)},is=async()=>{k(null),g(!0);try{if(!w.trim()){k("Zone name is required"),g(!1);return}if(E){const s={name:w.trim(),network:U,authoritative:G,forward_to:J.trim()||null,delegate_to:se.trim()||null,enabled:le,hosting_mode:A};await d.updateDnsZone(E.name,E.network,s)}else{const s={name:w.trim(),network:U,authoritative:G,forward_to:J.trim()||null,delegate_to:se.trim()||null,enabled:le,hosting_mode:A};await d.createDnsZone(s)}await we(),ke()}catch(s){k(s?.response?.data?.detail||s.message||"Failed to save zone")}finally{g(!1)}},os=async()=>{if(T)try{await d.deleteDnsZone(T.name,T.network),await we(),y(!1),H(null)}catch(s){j(s?.response?.data?.detail||s.message||"Failed to delete zone")}},B=async s=>{ne(s),await O(s.name,s.network),ze(!0)},Ce=(s,a)=>{ne(s),a?(ce(a),de(a.name),xe(a.type),me(a.value),ue(a.comment||""),ge(a.enabled)):(ce(null),de(""),xe("A"),me(""),ue(""),ge(!0)),f(null),Pe(!0)},L=()=>{ze(!1),ne(null),Oe([])},Se=()=>{Pe(!1),ce(null),f(null),i&&O(i.name,i.network)},cs=async()=>{if(i){f(null),g(!0);try{if(!C.trim()){f("Record name is required"),g(!1);return}if(!D.trim()){f("Record value is required"),g(!1);return}if(oe){const s={name:C.trim(),type:S,value:D.trim(),comment:he.trim()||null,enabled:je};await d.updateDnsRecord(oe.name,i.network,i.name,s)}else{const s={name:C.trim(),type:S,value:D.trim(),comment:he.trim()||null,enabled:je};await d.createDnsRecord(i.name,i.network,s)}await O(i.name,i.network),Se()}catch(s){f(s?.response?.data?.detail||s.message||"Failed to save record")}finally{g(!1)}}},ds=async()=>{if(!(!ye||!i))try{await d.deleteDnsRecord(ye.name,i.network,i.name),await O(i.name,i.network),_(!1),fe(null)}catch(s){j(s?.response?.data?.detail||s.message||"Failed to delete record")}};return We?e.jsx("div",{className:"flex h-screen items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading DNS zones..."})]})}):e.jsxs("div",{className:"flex h-screen",children:[e.jsx(js,{onLogout:ns,isOpen:_e,onClose:()=>He(!1)}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(gs,{hostname:"nixos-router",username:Qe,connectionStatus:rs,onMenuClick:()=>He(!_e)}),e.jsx("main",{className:"flex-1 overflow-y-auto p-6 bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(xs,{className:"w-8 h-8 text-gray-900 dark:text-white"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"DNS Management"})]})}),Ae&&e.jsx(x,{color:"failure",className:"mb-6",onDismiss:()=>j(null),children:Ae}),e.jsxs($e,{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"HOMELAB"}),(()=>{const s=K.homelab,t=Fe?.startsWith("homelab-");return e.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[s&&e.jsx(c,{color:s.is_active?"success":"gray",size:"sm",children:s.is_active?"Running":s.is_enabled?"Stopped":"Disabled"}),e.jsx(n,{size:"xs",color:"success",onClick:()=>h("homelab","start"),disabled:t||(s?.is_active??!1),title:"Start Service",children:e.jsx(Ke,{className:"w-4 h-4"})}),e.jsx(n,{size:"xs",color:"failure",onClick:()=>h("homelab","stop"),disabled:t||!(s?.is_active??!1),title:"Stop Service",children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsx(n,{size:"xs",color:"warning",onClick:()=>h("homelab","reload"),disabled:t||!(s?.is_active??!1),title:"Reload Service",children:e.jsx(I,{className:"w-4 h-4"})}),e.jsx(n,{size:"xs",color:"purple",onClick:()=>h("homelab","restart"),disabled:t,title:"Restart Service",children:e.jsx(I,{className:"w-4 h-4"})})]})})()]}),e.jsx(n,{color:"blue",onClick:()=>N(void 0,"homelab"),children:"New Zone"})]}),(()=>{const s=Re.filter(a=>a.network==="homelab");return s.length===0?e.jsx(x,{color:"info",icon:V,children:"No DNS zones configured for HOMELAB. Create a zone to get started."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden min-[1000px]:block overflow-x-auto",children:e.jsxs(l,{children:[e.jsxs(l.Head,{children:[e.jsx(l.HeadCell,{children:"Name"}),e.jsx(l.HeadCell,{children:"Authoritative"}),e.jsx(l.HeadCell,{children:"Forward To"}),e.jsx(l.HeadCell,{children:"Delegate To"}),e.jsx(l.HeadCell,{children:"Status"}),e.jsx(l.HeadCell,{children:"Actions"})]}),e.jsx(l.Body,{className:"divide-y",children:s.map(a=>e.jsxs(l.Row,{className:"bg-white dark:border-gray-700 dark:bg-gray-800",children:[e.jsx(l.Cell,{className:"whitespace-nowrap font-medium text-gray-900 dark:text-white",children:a.name}),e.jsx(l.Cell,{children:e.jsx(c,{color:a.hosting_mode==="partially_hosted"?"purple":"blue",size:"sm",children:a.hosting_mode==="partially_hosted"?"Partial":"Full"})}),e.jsx(l.Cell,{children:e.jsx(c,{color:a.authoritative?"success":"gray",children:a.authoritative?"Yes":"No"})}),e.jsx(l.Cell,{className:"text-gray-500 dark:text-gray-400",children:a.forward_to||"-"}),e.jsx(l.Cell,{className:"text-gray-500 dark:text-gray-400",children:a.delegate_to||"-"}),e.jsx(l.Cell,{children:(()=>{const t=P(a);return e.jsx(c,{color:t.is_active?"success":"gray",children:t.is_active?"Running":t.is_enabled?"Stopped":"Disabled"})})()}),e.jsx(l.Cell,{children:e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(n,{size:"xs",color:"blue",onClick:()=>B(a),children:"Records"}),e.jsx(n,{size:"xs",color:"gray",onClick:()=>N(a),children:e.jsx(u,{className:"w-4 h-4"})}),e.jsx(n,{size:"xs",color:"failure",onClick:()=>{H(a),y(!0)},children:e.jsx(p,{className:"w-4 h-4"})})]})})]},a.id))})]})}),e.jsx("div",{className:"min-[1000px]:hidden space-y-3",children:s.map(a=>{const t=P(a);return e.jsxs("div",{className:"p-4 rounded-lg border bg-white border-gray-200 dark:bg-gray-800 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"font-semibold text-lg mb-1 text-gray-900 dark:text-white",children:a.name})}),e.jsx(c,{color:t.is_active?"success":"gray",size:"sm",children:t.is_active?"Running":t.is_enabled?"Stopped":"Disabled"})]}),e.jsxs("div",{className:"space-y-2 text-sm mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Authoritative:"}),e.jsx(c,{color:a.authoritative?"success":"gray",size:"sm",children:a.authoritative?"Yes":"No"})]}),a.forward_to&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Forward To:"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-mono text-xs",children:a.forward_to})]}),a.delegate_to&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Delegate To:"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-mono text-xs",children:a.delegate_to})]})]}),e.jsx("div",{className:"pt-3 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex gap-2 mb-2 flex-wrap",children:[e.jsx(n,{size:"xs",color:"blue",onClick:()=>B(a),className:"flex-1 min-w-[80px]",children:"Records"}),e.jsx(n,{size:"xs",color:"gray",onClick:()=>N(a),className:"flex-1 min-w-[80px]",children:e.jsx(u,{className:"w-4 h-4"})}),e.jsx(n,{size:"xs",color:"failure",onClick:()=>{H(a),y(!0)},className:"flex-1 min-w-[80px]",children:e.jsx(p,{className:"w-4 h-4"})})]})})]},a.id)})})]})})(),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Dynamic DNS (DHCP clients)"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:["Read-only entries from DHCP leases. Configure ",e.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-1 rounded",children:"dynamic_domain"})," in DHCP for this network to enable."]}),Z&&e.jsx(x,{color:"failure",className:"mb-4",onDismiss:()=>z(null),children:Z}),Le?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Loading…"}):(()=>{const s=Ne.find(t=>t.network==="homelab")?.dynamic_domain??null,a=Be.homelab;return!s||s===""?e.jsxs(x,{color:"info",icon:V,children:["Dynamic DNS is disabled for this network. Set ",e.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-1 rounded",children:"dynamic_domain"})," in DHCP to enable."]}):a.length===0?e.jsx(x,{color:"info",children:"No dynamic DNS entries. Entries appear when DHCP clients have active leases."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(l,{children:[e.jsxs(l.Head,{children:[e.jsx(l.HeadCell,{children:"Hostname"}),e.jsx(l.HeadCell,{children:"FQDN"}),e.jsx(l.HeadCell,{children:"IP address"}),e.jsx(l.HeadCell,{children:"MAC"}),e.jsx(l.HeadCell,{children:"Actions"})]}),e.jsx(l.Body,{className:"divide-y",children:a.map((t,v)=>e.jsxs(l.Row,{className:"bg-white dark:border-gray-700 dark:bg-gray-800",children:[e.jsx(l.Cell,{className:"font-medium text-gray-900 dark:text-white",children:t.hostname}),e.jsx(l.Cell,{className:"text-gray-500 dark:text-gray-400 font-mono text-sm",children:t.hostname_fqdn}),e.jsx(l.Cell,{className:"text-gray-900 dark:text-white font-mono text-sm",children:t.ip_address}),e.jsx(l.Cell,{className:"text-gray-500 dark:text-gray-400 font-mono text-sm",children:t.mac_address}),e.jsx(l.Cell,{children:e.jsx(n,{size:"xs",color:"gray",onClick:()=>{ve(t),be("homelab")},title:"Edit hostname",children:e.jsx(u,{className:"w-4 h-4"})})})]},`${t.mac_address}-${v}`))})]})})})()]})]}),e.jsxs($e,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"LAN"}),(()=>{const s=K.lan,t=Fe?.startsWith("lan-");return e.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[s&&e.jsx(c,{color:s.is_active?"success":"gray",size:"sm",children:s.is_active?"Running":s.is_enabled?"Stopped":"Disabled"}),e.jsx(n,{size:"xs",color:"success",onClick:()=>h("lan","start"),disabled:t||(s?.is_active??!1),title:"Start Service",children:e.jsx(Ke,{className:"w-4 h-4"})}),e.jsx(n,{size:"xs",color:"failure",onClick:()=>h("lan","stop"),disabled:t||!(s?.is_active??!1),title:"Stop Service",children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsx(n,{size:"xs",color:"warning",onClick:()=>h("lan","reload"),disabled:t||!(s?.is_active??!1),title:"Reload Service",children:e.jsx(I,{className:"w-4 h-4"})}),e.jsx(n,{size:"xs",color:"purple",onClick:()=>h("lan","restart"),disabled:t,title:"Restart Service",children:e.jsx(I,{className:"w-4 h-4"})})]})})()]}),e.jsx(n,{color:"blue",onClick:()=>N(void 0,"lan"),children:"New Zone"})]}),(()=>{const s=Re.filter(a=>a.network==="lan");return s.length===0?e.jsx(x,{color:"info",icon:V,children:"No DNS zones configured for LAN. Create a zone to get started."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden min-[1000px]:block overflow-x-auto",children:e.jsxs(l,{children:[e.jsxs(l.Head,{children:[e.jsx(l.HeadCell,{children:"Name"}),e.jsx(l.HeadCell,{children:"Hosting Mode"}),e.jsx(l.HeadCell,{children:"Authoritative"}),e.jsx(l.HeadCell,{children:"Forward To"}),e.jsx(l.HeadCell,{children:"Delegate To"}),e.jsx(l.HeadCell,{children:"Status"}),e.jsx(l.HeadCell,{children:"Actions"})]}),e.jsx(l.Body,{className:"divide-y",children:s.map(a=>e.jsxs(l.Row,{className:"bg-white dark:border-gray-700 dark:bg-gray-800",children:[e.jsx(l.Cell,{className:"whitespace-nowrap font-medium text-gray-900 dark:text-white",children:a.name}),e.jsx(l.Cell,{children:e.jsx(c,{color:a.hosting_mode==="partially_hosted"?"purple":"blue",size:"sm",children:a.hosting_mode==="partially_hosted"?"Partial":"Full"})}),e.jsx(l.Cell,{children:e.jsx(c,{color:a.authoritative?"success":"gray",children:a.authoritative?"Yes":"No"})}),e.jsx(l.Cell,{className:"text-gray-500 dark:text-gray-400",children:a.forward_to||"-"}),e.jsx(l.Cell,{className:"text-gray-500 dark:text-gray-400",children:a.delegate_to||"-"}),e.jsx(l.Cell,{children:(()=>{const t=P(a);return e.jsx(c,{color:t.is_active?"success":"gray",children:t.is_active?"Running":t.is_enabled?"Stopped":"Disabled"})})()}),e.jsx(l.Cell,{children:e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(n,{size:"xs",color:"blue",onClick:()=>B(a),children:"Records"}),e.jsx(n,{size:"xs",color:"gray",onClick:()=>N(a),children:e.jsx(u,{className:"w-4 h-4"})}),e.jsx(n,{size:"xs",color:"failure",onClick:()=>{H(a),y(!0)},children:e.jsx(p,{className:"w-4 h-4"})})]})})]},a.id))})]})}),e.jsx("div",{className:"min-[1000px]:hidden space-y-3",children:s.map(a=>{const t=P(a);return e.jsxs("div",{className:"p-4 rounded-lg border bg-white border-gray-200 dark:bg-gray-800 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"font-semibold text-lg mb-1 text-gray-900 dark:text-white",children:a.name})}),e.jsx(c,{color:t.is_active?"success":"gray",size:"sm",children:t.is_active?"Running":t.is_enabled?"Stopped":"Disabled"})]}),e.jsxs("div",{className:"space-y-2 text-sm mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Authoritative:"}),e.jsx(c,{color:a.authoritative?"success":"gray",size:"sm",children:a.authoritative?"Yes":"No"})]}),a.forward_to&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Forward To:"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-mono text-xs",children:a.forward_to})]}),a.delegate_to&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Delegate To:"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-mono text-xs",children:a.delegate_to})]})]}),e.jsx("div",{className:"pt-3 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex gap-2 mb-2 flex-wrap",children:[e.jsx(n,{size:"xs",color:"blue",onClick:()=>B(a),className:"flex-1 min-w-[80px]",children:"Records"}),e.jsx(n,{size:"xs",color:"gray",onClick:()=>N(a),className:"flex-1 min-w-[80px]",children:e.jsx(u,{className:"w-4 h-4"})}),e.jsx(n,{size:"xs",color:"failure",onClick:()=>{H(a),y(!0)},className:"flex-1 min-w-[80px]",children:e.jsx(p,{className:"w-4 h-4"})})]})})]},a.id)})})]})})(),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Dynamic DNS (DHCP clients)"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:["Read-only entries from DHCP leases. Configure ",e.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-1 rounded",children:"dynamic_domain"})," in DHCP for this network to enable."]}),Z&&e.jsx(x,{color:"failure",className:"mb-4",onDismiss:()=>z(null),children:Z}),Le?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Loading…"}):(()=>{const s=Ne.find(t=>t.network==="lan")?.dynamic_domain??null,a=Be.lan;return!s||s===""?e.jsxs(x,{color:"info",icon:V,children:["Dynamic DNS is disabled for this network. Set ",e.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-1 rounded",children:"dynamic_domain"})," in DHCP to enable."]}):a.length===0?e.jsx(x,{color:"info",children:"No dynamic DNS entries. Entries appear when DHCP clients have active leases."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(l,{children:[e.jsxs(l.Head,{children:[e.jsx(l.HeadCell,{children:"Hostname"}),e.jsx(l.HeadCell,{children:"FQDN"}),e.jsx(l.HeadCell,{children:"IP address"}),e.jsx(l.HeadCell,{children:"MAC"}),e.jsx(l.HeadCell,{children:"Actions"})]}),e.jsx(l.Body,{className:"divide-y",children:a.map((t,v)=>e.jsxs(l.Row,{className:"bg-white dark:border-gray-700 dark:bg-gray-800",children:[e.jsx(l.Cell,{className:"font-medium text-gray-900 dark:text-white",children:t.hostname}),e.jsx(l.Cell,{className:"text-gray-500 dark:text-gray-400 font-mono text-sm",children:t.hostname_fqdn}),e.jsx(l.Cell,{className:"text-gray-900 dark:text-white font-mono text-sm",children:t.ip_address}),e.jsx(l.Cell,{className:"text-gray-500 dark:text-gray-400 font-mono text-sm",children:t.mac_address}),e.jsx(l.Cell,{children:e.jsx(n,{size:"xs",color:"gray",onClick:()=>{ve(t),be("lan")},title:"Edit hostname",children:e.jsx(u,{className:"w-4 h-4"})})})]},`${t.mac_address}-${v}`))})]})})})()]})]}),R&&pe&&e.jsx(ys,{show:!!R,onClose:()=>{ve(null),be(null)},currentHostname:R.hostname,dynamicDomain:Ne.find(s=>s.network===pe)?.dynamic_domain??null,network:pe,macAddress:R.mac_address,ipAddress:R.ip_address,onSaved:Ve}),e.jsxs(o,{show:Xe,onClose:ke,size:"lg",children:[e.jsx(o.Header,{children:E?"Edit DNS Zone":"Create DNS Zone"}),e.jsx(o.Body,{className:"max-h-[70vh] overflow-y-auto",children:e.jsxs("div",{className:"space-y-4",children:[Ze&&e.jsx(x,{color:"failure",children:Ze}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"zoneName",value:"Zone Name *"}),e.jsx(b,{id:"zoneName",value:w,onChange:s=>Q(s.target.value),placeholder:"example.com",required:!0,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"zoneNetwork",value:"Network *"}),e.jsxs(De,{id:"zoneNetwork",value:U,onChange:s=>W(s.target.value),className:"mt-1",children:[e.jsx("option",{value:"homelab",children:"HOMELAB"}),e.jsx("option",{value:"lan",children:"LAN"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"zoneAuthoritative",checked:G,onChange:s=>X(s.target.checked),className:"w-4 h-4"}),e.jsx(m,{htmlFor:"zoneAuthoritative",value:"Authoritative (serve locally)"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"zoneHostingMode",value:"Domain Hosting Mode *"}),e.jsxs(De,{id:"zoneHostingMode",value:A,onChange:s=>re(s.target.value),className:"mt-1",children:[e.jsx("option",{value:"fully_hosted",children:"Fully Hosted - Only serve configured records (unlisted get NXDOMAIN)"}),e.jsx("option",{value:"partially_hosted",children:"Partially Hosted - Serve configured records; forward unlisted to upstream"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:A==="fully_hosted"?"This domain is local-only. Queries for unlisted names will not be forwarded.":"Only configured records are served locally. All other names are looked up via upstream DNS."})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"zoneForwardTo",value:"Forward To (optional)"}),e.jsx(b,{id:"zoneForwardTo",value:J,onChange:s=>ee(s.target.value),placeholder:"192.168.1.1",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"zoneDelegateTo",value:"Delegate To (optional)"}),e.jsx(b,{id:"zoneDelegateTo",value:se,onChange:s=>ae(s.target.value),placeholder:"ns1.example.com",className:"mt-1"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"zoneEnabled",checked:le,onChange:s=>te(s.target.checked),className:"w-4 h-4"}),e.jsx(m,{htmlFor:"zoneEnabled",value:"Enabled"})]})]})}),e.jsxs(o.Footer,{children:[e.jsx(n,{color:"blue",onClick:is,disabled:F||!w.trim(),children:F?"Saving...":"Save"}),e.jsx(n,{color:"gray",onClick:ke,children:"Cancel"})]})]}),e.jsxs(o,{show:Je,onClose:L,size:"4xl",children:[e.jsx(o.Header,{children:i?`${i.network.toUpperCase()} DNS Records - ${i.name}`:"DNS Records"}),e.jsx(o.Body,{className:"max-h-[80vh] overflow-y-auto",children:e.jsxs("div",{className:"space-y-4",children:[M&&e.jsx(x,{color:"failure",children:M}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Records"}),i&&e.jsxs(n,{size:"sm",color:"blue",onClick:()=>Ce(i),children:[e.jsx(ms,{className:"w-4 h-4 mr-1"}),"Add Record"]})]}),ie.length===0?e.jsx(x,{color:"info",children:"No records in this zone. Add a record to get started."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden min-[1000px]:block overflow-x-auto",children:e.jsxs(l,{children:[e.jsxs(l.Head,{children:[e.jsx(l.HeadCell,{children:"Name"}),e.jsx(l.HeadCell,{children:"Type"}),e.jsx(l.HeadCell,{children:"Value"}),e.jsx(l.HeadCell,{children:"Comment"}),e.jsx(l.HeadCell,{children:"Status"}),e.jsx(l.HeadCell,{children:"Actions"})]}),e.jsx(l.Body,{className:"divide-y",children:ie.map(s=>e.jsxs(l.Row,{className:"bg-white dark:border-gray-700 dark:bg-gray-800",children:[e.jsx(l.Cell,{className:"font-medium text-gray-900 dark:text-white",children:s.name}),e.jsx(l.Cell,{children:e.jsx(c,{color:s.type==="A"?"blue":"purple",children:s.type})}),e.jsx(l.Cell,{className:"font-mono text-sm text-gray-900 dark:text-white",children:s.value}),e.jsx(l.Cell,{className:"text-gray-500 dark:text-gray-400",children:s.comment||"-"}),e.jsx(l.Cell,{children:e.jsx(c,{color:s.enabled?"success":"gray",children:s.enabled?"Enabled":"Disabled"})}),e.jsx(l.Cell,{children:e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(n,{size:"xs",color:"gray",onClick:()=>{L(),Ce(i,s)},children:e.jsx(u,{className:"w-4 h-4"})}),e.jsx(n,{size:"xs",color:"failure",onClick:()=>{fe(s),_(!0)},children:e.jsx(p,{className:"w-4 h-4"})})]})})]},s.id))})]})}),e.jsx("div",{className:"min-[1000px]:hidden space-y-3",children:ie.map(s=>e.jsxs("div",{className:"p-3 rounded-lg border bg-white border-gray-200 dark:bg-gray-800 dark:border-gray-700",children:[e.jsx("div",{className:"flex justify-between items-start mb-2",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:s.name}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(c,{color:s.type==="A"?"blue":"purple",size:"sm",children:s.type}),e.jsx(c,{color:s.enabled?"success":"gray",size:"sm",children:s.enabled?"Enabled":"Disabled"})]})]})}),e.jsxs("div",{className:"space-y-1 text-sm mb-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Value:"}),e.jsx("span",{className:"font-mono text-xs text-gray-900 dark:text-gray-100 break-all",children:s.value})]}),s.comment&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Comment:"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 text-xs",children:s.comment})]})]}),e.jsxs("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700 flex gap-2",children:[e.jsx(n,{size:"xs",color:"gray",onClick:()=>{L(),Ce(i,s)},className:"flex-1",children:e.jsx(u,{className:"w-4 h-4"})}),e.jsx(n,{size:"xs",color:"failure",onClick:()=>{fe(s),_(!0)},className:"flex-1",children:e.jsx(p,{className:"w-4 h-4"})})]})]},s.id))})]})]})}),e.jsx(o.Footer,{children:e.jsx(n,{color:"gray",onClick:L,children:"Close"})})]}),e.jsxs(o,{show:es,onClose:Se,size:"lg",children:[e.jsx(o.Header,{children:oe?"Edit DNS Record":"Create DNS Record"}),e.jsx(o.Body,{className:"max-h-[70vh] overflow-y-auto",children:e.jsxs("div",{className:"space-y-4",children:[M&&e.jsx(x,{color:"failure",children:M}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"recordName",value:"Record Name *"}),e.jsx(b,{id:"recordName",value:C,onChange:s=>de(s.target.value),placeholder:"hostname.example.com",required:!0,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"recordType",value:"Record Type *"}),e.jsxs(De,{id:"recordType",value:S,onChange:s=>xe(s.target.value),className:"mt-1",children:[e.jsx("option",{value:"A",children:"A (IPv4 Address)"}),e.jsx("option",{value:"CNAME",children:"CNAME (Alias)"})]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"recordValue",value:S==="A"?"IP Address *":"Target Hostname *"}),e.jsx(b,{id:"recordValue",value:D,onChange:s=>me(s.target.value),placeholder:S==="A"?"192.168.1.1":"target.example.com",required:!0,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"recordComment",value:"Comment (optional)"}),e.jsx(b,{id:"recordComment",value:he,onChange:s=>ue(s.target.value),className:"mt-1"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"recordEnabled",checked:je,onChange:s=>ge(s.target.checked),className:"w-4 h-4"}),e.jsx(m,{htmlFor:"recordEnabled",value:"Enabled"})]})]})}),e.jsxs(o.Footer,{children:[e.jsx(n,{color:"blue",onClick:cs,disabled:F||!C.trim()||!D.trim(),children:F?"Saving...":"Save"}),e.jsx(n,{color:"gray",onClick:Se,children:"Cancel"})]})]}),e.jsxs(o,{show:ss,onClose:()=>y(!1),size:"md",children:[e.jsx(o.Header,{children:"Delete Zone"}),e.jsx(o.Body,{children:e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["Are you sure you want to delete zone ",e.jsx("strong",{children:T?.name}),"? This will also delete all records in this zone."]})}),e.jsxs(o.Footer,{children:[e.jsx(n,{color:"failure",onClick:os,children:"Delete"}),e.jsx(n,{color:"gray",onClick:()=>y(!1),children:"Cancel"})]})]}),e.jsxs(o,{show:as,onClose:()=>_(!1),size:"md",children:[e.jsx(o.Header,{children:"Delete Record"}),e.jsx(o.Body,{children:e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["Are you sure you want to delete record ",e.jsx("strong",{children:ye?.name}),"?"]})}),e.jsxs(o.Footer,{children:[e.jsx(n,{color:"failure",onClick:ds,children:"Delete"}),e.jsx(n,{color:"gray",onClick:()=>_(!1),children:"Cancel"})]})]})]})})]})]})}export{ks as Dns};
