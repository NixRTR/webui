const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/Dashboard-SWAY-0qO.js","assets/js/ui-vendor-h9jYZGP7.js","assets/js/react-vendor-DKKOAuGG.js","assets/js/useMetrics-B39yiK-J.js","assets/js/http-vendor-B9ygI19o.js","assets/js/Network-CN5gHCUI.js","assets/js/CustomTooltip-5gaWcXpQ.js","assets/js/charts-_iF2RbR3.js","assets/js/Clients-CzU-pTWN.js","assets/js/DeviceUsage-paYEkIku.js","assets/js/ConnectionDetails-C9dNjfeY.js","assets/js/System-C02rJOqD.js","assets/js/SystemInfo-s0KygRAc.js","assets/js/Documentation-UCZDMSL0.js"])))=>i.map(i=>d[i]);
import{j as e,C as P,A as L,L as w,T as v,B as R}from"./ui-vendor-h9jYZGP7.js";import{e as C,g as D,r as i,u as A,B as O,f as N,h,N as E,R as B}from"./react-vendor-DKKOAuGG.js";import{a as T}from"./http-vendor-B9ygI19o.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var y={},_;function U(){if(_)return y;_=1;var n=C();return y.createRoot=n.createRoot,y.hydrateRoot=n.hydrateRoot,y}var q=U();const z=D(q),$="modulepreload",V=function(n){return"/"+n},S={},x=function(t,r,o){let s=Promise.resolve();if(r&&r.length>0){let j=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),l=c?.nonce||c?.getAttribute("nonce");s=j(r.map(d=>{if(d=V(d),d in S)return;S[d]=!0;const u=d.endsWith(".css"),p=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const g=document.createElement("link");if(g.rel=u?"stylesheet":$,u||(g.as="script"),g.crossOrigin="",g.href=d,l&&g.setAttribute("nonce",l),document.head.appendChild(g),u)return new Promise((I,k)=>{g.addEventListener("load",I),g.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(c){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=c,window.dispatchEvent(l),!l.defaultPrevented)throw c}return s.then(c=>{for(const l of c||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})},H="";class F{client;constructor(){this.client=T.create({baseURL:H,headers:{"Content-Type":"application/json"}}),this.client.interceptors.request.use(t=>{const r=localStorage.getItem("access_token");return r&&(t.headers.Authorization=`Bearer ${r}`),t},t=>Promise.reject(t)),this.client.interceptors.response.use(t=>t,t=>(t.response?.status===401&&(localStorage.removeItem("access_token"),localStorage.removeItem("username"),window.location.href="/login"),Promise.reject(t)))}async login(t){return(await this.client.post("/api/auth/login",t)).data}async logout(){await this.client.post("/api/auth/logout"),localStorage.removeItem("access_token"),localStorage.removeItem("username")}async getCurrentUser(){return(await this.client.get("/api/auth/me")).data}async getSystemHistory(t,r,o){const s={};return t&&(s.start=t.toISOString()),r&&(s.end=r.toISOString()),o&&(s.interval=o.toString()),(await this.client.get("/api/history/system",{params:s})).data}async getInterfaceHistory(t,r,o,s){const a={};return r&&(a.start=r.toISOString()),o&&(a.end=o.toISOString()),s&&(a.interval=s.toString()),(await this.client.get(`/api/history/interface/${t}`,{params:a})).data}async getBandwidthHistory(t,r="1h"){return(await this.client.get(`/api/history/bandwidth/${t}`,{params:{period:r}})).data}async healthCheck(){return(await this.client.get("/api/health")).data}async getCurrentClientBandwidth(){return(await this.client.get("/api/bandwidth/clients/current")).data}async getClientBandwidthHistory(t,r="1h",o="raw"){return(await this.client.get(`/api/bandwidth/clients/${t}`,{params:{range:r,interval:o}})).data}async getBulkClientBandwidthHistory(t="1h",r="raw"){return(await this.client.get("/api/bandwidth/clients/history/bulk",{params:{range:t,interval:r}})).data}async getCurrentInterfaceStats(){return(await this.client.get("/api/bandwidth/interfaces/current")).data}async getInterfaceTotals(t="1h"){return(await this.client.get("/api/bandwidth/interfaces/totals",{params:{range:t}})).data}async getClientConnections(t,r="1h"){return(await this.client.get(`/api/bandwidth/connections/${t}/current`,{params:{range:r}})).data}async getConnectionHistory(t,r,o,s="1h",a="raw"){return(await this.client.get(`/api/bandwidth/connections/${t}/history`,{params:{remote_ip:r,remote_port:o,range:s,interval:a}})).data}async getFastfetch(){return(await this.client.get("/api/system/fastfetch")).data}async getGitHubStats(){return(await this.client.get("/api/system/github-stats")).data}async getDocumentation(){return(await this.client.get("/api/system/documentation")).data}}const M=new F;function W(){const[n,t]=i.useState(""),[r,o]=i.useState(""),[s,a]=i.useState(""),[c,l]=i.useState(!1),j=A(),d=async u=>{u.preventDefault(),a(""),l(!0);try{const p=await M.login({username:n,password:r});localStorage.setItem("access_token",p.access_token),localStorage.setItem("username",p.username),j("/dashboard")}catch(p){a(p.response?.data?.detail||"Login failed")}finally{l(!1)}};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100 dark:bg-gray-900",children:e.jsxs(P,{className:"w-full max-w-md",children:[e.jsx("h1",{className:"text-2xl font-bold text-center mb-4",children:"Router WebUI"}),s&&e.jsx(L,{color:"failure",className:"mb-4",children:s}),e.jsxs("form",{onSubmit:d,className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx(w,{htmlFor:"username",value:"Username"}),e.jsx(v,{id:"username",type:"text",placeholder:"Enter your username",value:n,onChange:u=>t(u.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"password",value:"Password"}),e.jsx(v,{id:"password",type:"password",placeholder:"Enter your password",value:r,onChange:u=>o(u.target.value),required:!0})]}),e.jsx(R,{type:"submit",disabled:c,children:c?"Logging in...":"Sign in"})]})]})})}const G=i.lazy(()=>x(()=>import("./Dashboard-SWAY-0qO.js"),__vite__mapDeps([0,1,2,3,4])).then(n=>({default:n.Dashboard}))),K=i.lazy(()=>x(()=>import("./Network-CN5gHCUI.js"),__vite__mapDeps([5,1,2,3,6,7,4])).then(n=>({default:n.Network}))),J=i.lazy(()=>x(()=>import("./Clients-CzU-pTWN.js"),__vite__mapDeps([8,1,2,3,4])).then(n=>({default:n.Clients}))),Q=i.lazy(()=>x(()=>import("./DeviceUsage-paYEkIku.js"),__vite__mapDeps([9,1,2,6,3,7,4])).then(n=>({default:n.DeviceUsage}))),b=i.lazy(()=>x(()=>import("./ConnectionDetails-C9dNjfeY.js"),__vite__mapDeps([10,1,2,6,3,7,4])).then(n=>({default:n.ConnectionDetails}))),X=i.lazy(()=>x(()=>import("./System-C02rJOqD.js"),__vite__mapDeps([11,1,2,6,3,7,4])).then(n=>({default:n.System}))),Y=i.lazy(()=>x(()=>import("./SystemInfo-s0KygRAc.js"),__vite__mapDeps([12,1,2,3,4])).then(n=>({default:n.SystemInfo}))),Z=i.lazy(()=>x(()=>import("./Documentation-UCZDMSL0.js"),__vite__mapDeps([13,1,2,3,4])).then(n=>({default:n.Documentation}))),m=()=>e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading..."})});function f({children:n}){return localStorage.getItem("access_token")?e.jsx(e.Fragment,{children:n}):e.jsx(E,{to:"/login",replace:!0})}function ee(){return e.jsx(O,{children:e.jsxs(N,{children:[e.jsx(h,{path:"/login",element:e.jsx(W,{})}),e.jsx(h,{path:"/dashboard",element:e.jsx(f,{children:e.jsx(i.Suspense,{fallback:e.jsx(m,{}),children:e.jsx(G,{})})})}),e.jsx(h,{path:"/network",element:e.jsx(f,{children:e.jsx(i.Suspense,{fallback:e.jsx(m,{}),children:e.jsx(K,{})})})}),e.jsx(h,{path:"/devices",element:e.jsx(f,{children:e.jsx(i.Suspense,{fallback:e.jsx(m,{}),children:e.jsx(J,{})})})}),e.jsx(h,{path:"/device-usage",element:e.jsx(f,{children:e.jsx(i.Suspense,{fallback:e.jsx(m,{}),children:e.jsx(Q,{})})})}),e.jsx(h,{path:"/device-usage/:ipAddress",element:e.jsx(f,{children:e.jsx(i.Suspense,{fallback:e.jsx(m,{}),children:e.jsx(b,{sourcePage:"device-usage"})})})}),e.jsx(h,{path:"/devices/:ipAddress",element:e.jsx(f,{children:e.jsx(i.Suspense,{fallback:e.jsx(m,{}),children:e.jsx(b,{sourcePage:"devices"})})})}),e.jsx(h,{path:"/system",element:e.jsx(f,{children:e.jsx(i.Suspense,{fallback:e.jsx(m,{}),children:e.jsx(X,{})})})}),e.jsx(h,{path:"/system-info",element:e.jsx(f,{children:e.jsx(i.Suspense,{fallback:e.jsx(m,{}),children:e.jsx(Y,{})})})}),e.jsx(h,{path:"/documentation",element:e.jsx(f,{children:e.jsx(i.Suspense,{fallback:e.jsx(m,{}),children:e.jsx(Z,{})})})}),e.jsx(h,{path:"/",element:e.jsx(E,{to:"/dashboard",replace:!0})})]})})}(()=>{try{const n=localStorage.getItem("theme"),t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,r=n?n==="dark":t,o=document.documentElement;r?o.classList.add("dark"):o.classList.remove("dark")}catch{}})();z.createRoot(document.getElementById("root")).render(e.jsx(B.StrictMode,{children:e.jsx(ee,{})}));export{M as a};
