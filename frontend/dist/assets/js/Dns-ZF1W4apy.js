import{j as e,r as rs,A as x,C as ze,a as o,B as r,s as Pe,t as Be,u as O,o as L,b as l,c as v,v as b,M as c,L as m,T as p,S as Oe,w as ns}from"./ui-vendor-CLzVGpw3.js";import{u as is,a as n}from"./react-vendor-4URc7N9U.js";import{u as cs,S as os,N as ds}from"./useMetrics-CslwQGJI.js";import{a as d}from"./index-BnG-Hx-o.js";import"./http-vendor-B9ygI19o.js";function gs(){const I=localStorage.getItem("access_token"),Le=localStorage.getItem("username")||"Unknown",V=is(),[ve,be]=n.useState(!1),[pe,Ie]=n.useState([]),[Ve,we]=n.useState(!0),[ke,u]=n.useState(null),[$,$e]=n.useState({}),[Ce,Se]=n.useState(null),[qe,De]=n.useState(!1),[R,q]=n.useState(null),[w,K]=n.useState(""),[Y,Q]=n.useState("homelab"),[U,W]=n.useState(!0),[G,J]=n.useState(""),[X,ee]=n.useState(""),[se,ae]=n.useState(!0),[E,j]=n.useState(!1),[_e,k]=n.useState(null),[Ke,He]=n.useState(!1),[Ye,Re]=n.useState(!1),[i,le]=n.useState(null),[te,Ee]=n.useState([]),[re,ne]=n.useState(null),[C,ie]=n.useState(""),[S,ce]=n.useState("A"),[D,oe]=n.useState(""),[de,xe]=n.useState(""),[me,he]=n.useState(!0),[F,y]=n.useState(null),[Qe,g]=n.useState(!1),[Ue,_]=n.useState(!1),[A,H]=n.useState(null),[ue,je]=n.useState(null),[Fe,We]=n.useState([]),[Ae,Ge]=n.useState({homelab:[],lan:[]}),[Te,Ze]=n.useState(!1),[T,Z]=n.useState(null),{connectionStatus:Je}=cs(I);n.useEffect(()=>{if(!I){V("/login");return}ge(),Me(),Xe()},[I,V]);const Xe=async()=>{Ze(!0),Z(null);try{const[s,a,t]=await Promise.all([d.getDhcpNetworks(),d.getDnsDynamicEntries("homelab"),d.getDnsDynamicEntries("lan")]);We(s),Ge({homelab:a,lan:t})}catch(s){const a=s&&typeof s=="object"&&"response"in s&&s.response&&typeof s.response=="object"&&"data"in s.response?String(s.response.data?.detail):s instanceof Error?s.message:"Failed to load dynamic DNS data";Z(a)}finally{Ze(!1)}},ge=async()=>{we(!0),u(null);try{const s=await d.getDnsZones();Ie(s)}catch(s){u(s?.response?.data?.detail||s.message||"Failed to load DNS zones")}finally{we(!1)}},Me=async()=>{try{const[s,a]=await Promise.all([d.getDnsServiceStatus("homelab"),d.getDnsServiceStatus("lan")]);$e({homelab:s,lan:a})}catch(s){console.error("Failed to fetch DNS service statuses:",s)}},h=async(s,a)=>{const t=`${s}-${a}`;Se(t);try{await d.controlDnsService(s,a),setTimeout(()=>{Me()},1e3)}catch(f){u(f?.response?.data?.detail||f.message||`Failed to ${a} DNS service`)}finally{Se(null)}},M=s=>{const a=$[s.network];return!a||!a.exists?{is_active:!1,is_enabled:!1}:{is_active:a.is_active,is_enabled:a.is_enabled}},z=async(s,a)=>{try{const t=await d.getDnsRecords(s,a);Ee(t)}catch(t){u(t?.response?.data?.detail||t.message||"Failed to load DNS records")}},es=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("username"),V("/login")},N=(s,a)=>{s?(q(s),K(s.name),Q(s.network),W(s.authoritative),J(s.forward_to||""),ee(s.delegate_to||""),ae(s.enabled)):(q(null),K(""),Q(a||"homelab"),W(!0),J(""),ee(""),ae(!0)),k(null),De(!0)},ye=()=>{De(!1),q(null),k(null)},ss=async()=>{k(null),j(!0);try{if(!w.trim()){k("Zone name is required"),j(!1);return}if(R){const s={name:w.trim(),network:Y,authoritative:U,forward_to:G.trim()||null,delegate_to:X.trim()||null,enabled:se};await d.updateDnsZone(R.name,R.network,s)}else{const s={name:w.trim(),network:Y,authoritative:U,forward_to:G.trim()||null,delegate_to:X.trim()||null,enabled:se};await d.createDnsZone(s)}await ge(),ye()}catch(s){k(s?.response?.data?.detail||s.message||"Failed to save zone")}finally{j(!1)}},as=async()=>{if(A)try{await d.deleteDnsZone(A.name,A.network),await ge(),g(!1),H(null)}catch(s){u(s?.response?.data?.detail||s.message||"Failed to delete zone")}},P=async s=>{le(s),await z(s.name,s.network),He(!0)},Ne=(s,a)=>{le(s),a?(ne(a),ie(a.name),ce(a.type),oe(a.value),xe(a.comment||""),he(a.enabled)):(ne(null),ie(""),ce("A"),oe(""),xe(""),he(!0)),y(null),Re(!0)},B=()=>{He(!1),le(null),Ee([])},fe=()=>{Re(!1),ne(null),y(null),i&&z(i.name,i.network)},ls=async()=>{if(i){y(null),j(!0);try{if(!C.trim()){y("Record name is required"),j(!1);return}if(!D.trim()){y("Record value is required"),j(!1);return}if(re){const s={name:C.trim(),type:S,value:D.trim(),comment:de.trim()||null,enabled:me};await d.updateDnsRecord(re.name,i.network,i.name,s)}else{const s={name:C.trim(),type:S,value:D.trim(),comment:de.trim()||null,enabled:me};await d.createDnsRecord(i.name,i.network,s)}await z(i.name,i.network),fe()}catch(s){y(s?.response?.data?.detail||s.message||"Failed to save record")}finally{j(!1)}}},ts=async()=>{if(!(!ue||!i))try{await d.deleteDnsRecord(ue.name,i.network,i.name),await z(i.name,i.network),_(!1),je(null)}catch(s){u(s?.response?.data?.detail||s.message||"Failed to delete record")}};return Ve?e.jsx("div",{className:"flex h-screen items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading DNS zones..."})]})}):e.jsxs("div",{className:"flex h-screen",children:[e.jsx(os,{onLogout:es,isOpen:ve,onClose:()=>be(!1)}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(ds,{hostname:"nixos-router",username:Le,connectionStatus:Je,onMenuClick:()=>be(!ve)}),e.jsx("main",{className:"flex-1 overflow-y-auto p-6 bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(rs,{className:"w-8 h-8 text-gray-900 dark:text-white"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"DNS Management"})]})}),ke&&e.jsx(x,{color:"failure",className:"mb-6",onDismiss:()=>u(null),children:ke}),e.jsxs(ze,{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"HOMELAB"}),(()=>{const s=$.homelab,t=Ce?.startsWith("homelab-");return e.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[s&&e.jsx(o,{color:s.is_active?"success":"gray",size:"sm",children:s.is_active?"Running":s.is_enabled?"Stopped":"Disabled"}),e.jsx(r,{size:"xs",color:"success",onClick:()=>h("homelab","start"),disabled:t||(s?.is_active??!1),title:"Start Service",children:e.jsx(Pe,{className:"w-4 h-4"})}),e.jsx(r,{size:"xs",color:"failure",onClick:()=>h("homelab","stop"),disabled:t||!(s?.is_active??!1),title:"Stop Service",children:e.jsx(Be,{className:"w-4 h-4"})}),e.jsx(r,{size:"xs",color:"warning",onClick:()=>h("homelab","reload"),disabled:t||!(s?.is_active??!1),title:"Reload Service",children:e.jsx(O,{className:"w-4 h-4"})}),e.jsx(r,{size:"xs",color:"purple",onClick:()=>h("homelab","restart"),disabled:t,title:"Restart Service",children:e.jsx(O,{className:"w-4 h-4"})})]})})()]}),e.jsx(r,{color:"blue",onClick:()=>N(void 0,"homelab"),children:"New Zone"})]}),(()=>{const s=pe.filter(a=>a.network==="homelab");return s.length===0?e.jsx(x,{color:"info",icon:L,children:"No DNS zones configured for HOMELAB. Create a zone to get started."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden min-[1000px]:block overflow-x-auto",children:e.jsxs(l,{children:[e.jsxs(l.Head,{children:[e.jsx(l.HeadCell,{children:"Name"}),e.jsx(l.HeadCell,{children:"Authoritative"}),e.jsx(l.HeadCell,{children:"Forward To"}),e.jsx(l.HeadCell,{children:"Delegate To"}),e.jsx(l.HeadCell,{children:"Status"}),e.jsx(l.HeadCell,{children:"Actions"})]}),e.jsx(l.Body,{className:"divide-y",children:s.map(a=>e.jsxs(l.Row,{className:"bg-white dark:border-gray-700 dark:bg-gray-800",children:[e.jsx(l.Cell,{className:"whitespace-nowrap font-medium text-gray-900 dark:text-white",children:a.name}),e.jsx(l.Cell,{children:e.jsx(o,{color:a.authoritative?"success":"gray",children:a.authoritative?"Yes":"No"})}),e.jsx(l.Cell,{className:"text-gray-500 dark:text-gray-400",children:a.forward_to||"-"}),e.jsx(l.Cell,{className:"text-gray-500 dark:text-gray-400",children:a.delegate_to||"-"}),e.jsx(l.Cell,{children:(()=>{const t=M(a);return e.jsx(o,{color:t.is_active?"success":"gray",children:t.is_active?"Running":t.is_enabled?"Stopped":"Disabled"})})()}),e.jsx(l.Cell,{children:e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(r,{size:"xs",color:"blue",onClick:()=>P(a),children:"Records"}),e.jsx(r,{size:"xs",color:"gray",onClick:()=>N(a),children:e.jsx(v,{className:"w-4 h-4"})}),e.jsx(r,{size:"xs",color:"failure",onClick:()=>{H(a),g(!0)},children:e.jsx(b,{className:"w-4 h-4"})})]})})]},a.id))})]})}),e.jsx("div",{className:"min-[1000px]:hidden space-y-3",children:s.map(a=>{const t=M(a);return e.jsxs("div",{className:"p-4 rounded-lg border bg-white border-gray-200 dark:bg-gray-800 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"font-semibold text-lg mb-1 text-gray-900 dark:text-white",children:a.name})}),e.jsx(o,{color:t.is_active?"success":"gray",size:"sm",children:t.is_active?"Running":t.is_enabled?"Stopped":"Disabled"})]}),e.jsxs("div",{className:"space-y-2 text-sm mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Authoritative:"}),e.jsx(o,{color:a.authoritative?"success":"gray",size:"sm",children:a.authoritative?"Yes":"No"})]}),a.forward_to&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Forward To:"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-mono text-xs",children:a.forward_to})]}),a.delegate_to&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Delegate To:"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-mono text-xs",children:a.delegate_to})]})]}),e.jsx("div",{className:"pt-3 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex gap-2 mb-2 flex-wrap",children:[e.jsx(r,{size:"xs",color:"blue",onClick:()=>P(a),className:"flex-1 min-w-[80px]",children:"Records"}),e.jsx(r,{size:"xs",color:"gray",onClick:()=>N(a),className:"flex-1 min-w-[80px]",children:e.jsx(v,{className:"w-4 h-4"})}),e.jsx(r,{size:"xs",color:"failure",onClick:()=>{H(a),g(!0)},className:"flex-1 min-w-[80px]",children:e.jsx(b,{className:"w-4 h-4"})})]})})]},a.id)})})]})})(),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Dynamic DNS (DHCP clients)"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:["Read-only entries from DHCP leases. Configure ",e.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-1 rounded",children:"dynamic_domain"})," in DHCP for this network to enable."]}),T&&e.jsx(x,{color:"failure",className:"mb-4",onDismiss:()=>Z(null),children:T}),Te?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Loading…"}):(()=>{const s=Fe.find(t=>t.network==="homelab")?.dynamic_domain??null,a=Ae.homelab;return!s||s===""?e.jsxs(x,{color:"info",icon:L,children:["Dynamic DNS is disabled for this network. Set ",e.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-1 rounded",children:"dynamic_domain"})," in DHCP to enable."]}):a.length===0?e.jsx(x,{color:"info",children:"No dynamic DNS entries. Entries appear when DHCP clients have active leases."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(l,{children:[e.jsxs(l.Head,{children:[e.jsx(l.HeadCell,{children:"Hostname"}),e.jsx(l.HeadCell,{children:"FQDN"}),e.jsx(l.HeadCell,{children:"IP address"}),e.jsx(l.HeadCell,{children:"MAC"})]}),e.jsx(l.Body,{className:"divide-y",children:a.map((t,f)=>e.jsxs(l.Row,{className:"bg-white dark:border-gray-700 dark:bg-gray-800",children:[e.jsx(l.Cell,{className:"font-medium text-gray-900 dark:text-white",children:t.hostname}),e.jsx(l.Cell,{className:"text-gray-500 dark:text-gray-400 font-mono text-sm",children:t.hostname_fqdn}),e.jsx(l.Cell,{className:"text-gray-900 dark:text-white font-mono text-sm",children:t.ip_address}),e.jsx(l.Cell,{className:"text-gray-500 dark:text-gray-400 font-mono text-sm",children:t.mac_address})]},`${t.mac_address}-${f}`))})]})})})()]})]}),e.jsxs(ze,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"LAN"}),(()=>{const s=$.lan,t=Ce?.startsWith("lan-");return e.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[s&&e.jsx(o,{color:s.is_active?"success":"gray",size:"sm",children:s.is_active?"Running":s.is_enabled?"Stopped":"Disabled"}),e.jsx(r,{size:"xs",color:"success",onClick:()=>h("lan","start"),disabled:t||(s?.is_active??!1),title:"Start Service",children:e.jsx(Pe,{className:"w-4 h-4"})}),e.jsx(r,{size:"xs",color:"failure",onClick:()=>h("lan","stop"),disabled:t||!(s?.is_active??!1),title:"Stop Service",children:e.jsx(Be,{className:"w-4 h-4"})}),e.jsx(r,{size:"xs",color:"warning",onClick:()=>h("lan","reload"),disabled:t||!(s?.is_active??!1),title:"Reload Service",children:e.jsx(O,{className:"w-4 h-4"})}),e.jsx(r,{size:"xs",color:"purple",onClick:()=>h("lan","restart"),disabled:t,title:"Restart Service",children:e.jsx(O,{className:"w-4 h-4"})})]})})()]}),e.jsx(r,{color:"blue",onClick:()=>N(void 0,"lan"),children:"New Zone"})]}),(()=>{const s=pe.filter(a=>a.network==="lan");return s.length===0?e.jsx(x,{color:"info",icon:L,children:"No DNS zones configured for LAN. Create a zone to get started."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden min-[1000px]:block overflow-x-auto",children:e.jsxs(l,{children:[e.jsxs(l.Head,{children:[e.jsx(l.HeadCell,{children:"Name"}),e.jsx(l.HeadCell,{children:"Authoritative"}),e.jsx(l.HeadCell,{children:"Forward To"}),e.jsx(l.HeadCell,{children:"Delegate To"}),e.jsx(l.HeadCell,{children:"Status"}),e.jsx(l.HeadCell,{children:"Actions"})]}),e.jsx(l.Body,{className:"divide-y",children:s.map(a=>e.jsxs(l.Row,{className:"bg-white dark:border-gray-700 dark:bg-gray-800",children:[e.jsx(l.Cell,{className:"whitespace-nowrap font-medium text-gray-900 dark:text-white",children:a.name}),e.jsx(l.Cell,{children:e.jsx(o,{color:a.authoritative?"success":"gray",children:a.authoritative?"Yes":"No"})}),e.jsx(l.Cell,{className:"text-gray-500 dark:text-gray-400",children:a.forward_to||"-"}),e.jsx(l.Cell,{className:"text-gray-500 dark:text-gray-400",children:a.delegate_to||"-"}),e.jsx(l.Cell,{children:(()=>{const t=M(a);return e.jsx(o,{color:t.is_active?"success":"gray",children:t.is_active?"Running":t.is_enabled?"Stopped":"Disabled"})})()}),e.jsx(l.Cell,{children:e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(r,{size:"xs",color:"blue",onClick:()=>P(a),children:"Records"}),e.jsx(r,{size:"xs",color:"gray",onClick:()=>N(a),children:e.jsx(v,{className:"w-4 h-4"})}),e.jsx(r,{size:"xs",color:"failure",onClick:()=>{H(a),g(!0)},children:e.jsx(b,{className:"w-4 h-4"})})]})})]},a.id))})]})}),e.jsx("div",{className:"min-[1000px]:hidden space-y-3",children:s.map(a=>{const t=M(a);return e.jsxs("div",{className:"p-4 rounded-lg border bg-white border-gray-200 dark:bg-gray-800 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"font-semibold text-lg mb-1 text-gray-900 dark:text-white",children:a.name})}),e.jsx(o,{color:t.is_active?"success":"gray",size:"sm",children:t.is_active?"Running":t.is_enabled?"Stopped":"Disabled"})]}),e.jsxs("div",{className:"space-y-2 text-sm mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Authoritative:"}),e.jsx(o,{color:a.authoritative?"success":"gray",size:"sm",children:a.authoritative?"Yes":"No"})]}),a.forward_to&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Forward To:"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-mono text-xs",children:a.forward_to})]}),a.delegate_to&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Delegate To:"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-mono text-xs",children:a.delegate_to})]})]}),e.jsx("div",{className:"pt-3 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex gap-2 mb-2 flex-wrap",children:[e.jsx(r,{size:"xs",color:"blue",onClick:()=>P(a),className:"flex-1 min-w-[80px]",children:"Records"}),e.jsx(r,{size:"xs",color:"gray",onClick:()=>N(a),className:"flex-1 min-w-[80px]",children:e.jsx(v,{className:"w-4 h-4"})}),e.jsx(r,{size:"xs",color:"failure",onClick:()=>{H(a),g(!0)},className:"flex-1 min-w-[80px]",children:e.jsx(b,{className:"w-4 h-4"})})]})})]},a.id)})})]})})(),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Dynamic DNS (DHCP clients)"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:["Read-only entries from DHCP leases. Configure ",e.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-1 rounded",children:"dynamic_domain"})," in DHCP for this network to enable."]}),T&&e.jsx(x,{color:"failure",className:"mb-4",onDismiss:()=>Z(null),children:T}),Te?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Loading…"}):(()=>{const s=Fe.find(t=>t.network==="lan")?.dynamic_domain??null,a=Ae.lan;return!s||s===""?e.jsxs(x,{color:"info",icon:L,children:["Dynamic DNS is disabled for this network. Set ",e.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-1 rounded",children:"dynamic_domain"})," in DHCP to enable."]}):a.length===0?e.jsx(x,{color:"info",children:"No dynamic DNS entries. Entries appear when DHCP clients have active leases."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(l,{children:[e.jsxs(l.Head,{children:[e.jsx(l.HeadCell,{children:"Hostname"}),e.jsx(l.HeadCell,{children:"FQDN"}),e.jsx(l.HeadCell,{children:"IP address"}),e.jsx(l.HeadCell,{children:"MAC"})]}),e.jsx(l.Body,{className:"divide-y",children:a.map((t,f)=>e.jsxs(l.Row,{className:"bg-white dark:border-gray-700 dark:bg-gray-800",children:[e.jsx(l.Cell,{className:"font-medium text-gray-900 dark:text-white",children:t.hostname}),e.jsx(l.Cell,{className:"text-gray-500 dark:text-gray-400 font-mono text-sm",children:t.hostname_fqdn}),e.jsx(l.Cell,{className:"text-gray-900 dark:text-white font-mono text-sm",children:t.ip_address}),e.jsx(l.Cell,{className:"text-gray-500 dark:text-gray-400 font-mono text-sm",children:t.mac_address})]},`${t.mac_address}-${f}`))})]})})})()]})]}),e.jsxs(c,{show:qe,onClose:ye,size:"lg",children:[e.jsx(c.Header,{children:R?"Edit DNS Zone":"Create DNS Zone"}),e.jsx(c.Body,{className:"max-h-[70vh] overflow-y-auto",children:e.jsxs("div",{className:"space-y-4",children:[_e&&e.jsx(x,{color:"failure",children:_e}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"zoneName",value:"Zone Name *"}),e.jsx(p,{id:"zoneName",value:w,onChange:s=>K(s.target.value),placeholder:"example.com",required:!0,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"zoneNetwork",value:"Network *"}),e.jsxs(Oe,{id:"zoneNetwork",value:Y,onChange:s=>Q(s.target.value),className:"mt-1",children:[e.jsx("option",{value:"homelab",children:"HOMELAB"}),e.jsx("option",{value:"lan",children:"LAN"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"zoneAuthoritative",checked:U,onChange:s=>W(s.target.checked),className:"w-4 h-4"}),e.jsx(m,{htmlFor:"zoneAuthoritative",value:"Authoritative (serve locally)"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"zoneForwardTo",value:"Forward To (optional)"}),e.jsx(p,{id:"zoneForwardTo",value:G,onChange:s=>J(s.target.value),placeholder:"192.168.1.1",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"zoneDelegateTo",value:"Delegate To (optional)"}),e.jsx(p,{id:"zoneDelegateTo",value:X,onChange:s=>ee(s.target.value),placeholder:"ns1.example.com",className:"mt-1"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"zoneEnabled",checked:se,onChange:s=>ae(s.target.checked),className:"w-4 h-4"}),e.jsx(m,{htmlFor:"zoneEnabled",value:"Enabled"})]})]})}),e.jsxs(c.Footer,{children:[e.jsx(r,{color:"blue",onClick:ss,disabled:E||!w.trim(),children:E?"Saving...":"Save"}),e.jsx(r,{color:"gray",onClick:ye,children:"Cancel"})]})]}),e.jsxs(c,{show:Ke,onClose:B,size:"4xl",children:[e.jsx(c.Header,{children:i?`${i.network.toUpperCase()} DNS Records - ${i.name}`:"DNS Records"}),e.jsx(c.Body,{className:"max-h-[80vh] overflow-y-auto",children:e.jsxs("div",{className:"space-y-4",children:[F&&e.jsx(x,{color:"failure",children:F}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Records"}),i&&e.jsxs(r,{size:"sm",color:"blue",onClick:()=>Ne(i),children:[e.jsx(ns,{className:"w-4 h-4 mr-1"}),"Add Record"]})]}),te.length===0?e.jsx(x,{color:"info",children:"No records in this zone. Add a record to get started."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden min-[1000px]:block overflow-x-auto",children:e.jsxs(l,{children:[e.jsxs(l.Head,{children:[e.jsx(l.HeadCell,{children:"Name"}),e.jsx(l.HeadCell,{children:"Type"}),e.jsx(l.HeadCell,{children:"Value"}),e.jsx(l.HeadCell,{children:"Comment"}),e.jsx(l.HeadCell,{children:"Status"}),e.jsx(l.HeadCell,{children:"Actions"})]}),e.jsx(l.Body,{className:"divide-y",children:te.map(s=>e.jsxs(l.Row,{className:"bg-white dark:border-gray-700 dark:bg-gray-800",children:[e.jsx(l.Cell,{className:"font-medium text-gray-900 dark:text-white",children:s.name}),e.jsx(l.Cell,{children:e.jsx(o,{color:s.type==="A"?"blue":"purple",children:s.type})}),e.jsx(l.Cell,{className:"font-mono text-sm text-gray-900 dark:text-white",children:s.value}),e.jsx(l.Cell,{className:"text-gray-500 dark:text-gray-400",children:s.comment||"-"}),e.jsx(l.Cell,{children:e.jsx(o,{color:s.enabled?"success":"gray",children:s.enabled?"Enabled":"Disabled"})}),e.jsx(l.Cell,{children:e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(r,{size:"xs",color:"gray",onClick:()=>{B(),Ne(i,s)},children:e.jsx(v,{className:"w-4 h-4"})}),e.jsx(r,{size:"xs",color:"failure",onClick:()=>{je(s),_(!0)},children:e.jsx(b,{className:"w-4 h-4"})})]})})]},s.id))})]})}),e.jsx("div",{className:"min-[1000px]:hidden space-y-3",children:te.map(s=>e.jsxs("div",{className:"p-3 rounded-lg border bg-white border-gray-200 dark:bg-gray-800 dark:border-gray-700",children:[e.jsx("div",{className:"flex justify-between items-start mb-2",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:s.name}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(o,{color:s.type==="A"?"blue":"purple",size:"sm",children:s.type}),e.jsx(o,{color:s.enabled?"success":"gray",size:"sm",children:s.enabled?"Enabled":"Disabled"})]})]})}),e.jsxs("div",{className:"space-y-1 text-sm mb-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Value:"}),e.jsx("span",{className:"font-mono text-xs text-gray-900 dark:text-gray-100 break-all",children:s.value})]}),s.comment&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Comment:"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 text-xs",children:s.comment})]})]}),e.jsxs("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700 flex gap-2",children:[e.jsx(r,{size:"xs",color:"gray",onClick:()=>{B(),Ne(i,s)},className:"flex-1",children:e.jsx(v,{className:"w-4 h-4"})}),e.jsx(r,{size:"xs",color:"failure",onClick:()=>{je(s),_(!0)},className:"flex-1",children:e.jsx(b,{className:"w-4 h-4"})})]})]},s.id))})]})]})}),e.jsx(c.Footer,{children:e.jsx(r,{color:"gray",onClick:B,children:"Close"})})]}),e.jsxs(c,{show:Ye,onClose:fe,size:"lg",children:[e.jsx(c.Header,{children:re?"Edit DNS Record":"Create DNS Record"}),e.jsx(c.Body,{className:"max-h-[70vh] overflow-y-auto",children:e.jsxs("div",{className:"space-y-4",children:[F&&e.jsx(x,{color:"failure",children:F}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"recordName",value:"Record Name *"}),e.jsx(p,{id:"recordName",value:C,onChange:s=>ie(s.target.value),placeholder:"hostname.example.com",required:!0,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"recordType",value:"Record Type *"}),e.jsxs(Oe,{id:"recordType",value:S,onChange:s=>ce(s.target.value),className:"mt-1",children:[e.jsx("option",{value:"A",children:"A (IPv4 Address)"}),e.jsx("option",{value:"CNAME",children:"CNAME (Alias)"})]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"recordValue",value:S==="A"?"IP Address *":"Target Hostname *"}),e.jsx(p,{id:"recordValue",value:D,onChange:s=>oe(s.target.value),placeholder:S==="A"?"192.168.1.1":"target.example.com",required:!0,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"recordComment",value:"Comment (optional)"}),e.jsx(p,{id:"recordComment",value:de,onChange:s=>xe(s.target.value),className:"mt-1"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"recordEnabled",checked:me,onChange:s=>he(s.target.checked),className:"w-4 h-4"}),e.jsx(m,{htmlFor:"recordEnabled",value:"Enabled"})]})]})}),e.jsxs(c.Footer,{children:[e.jsx(r,{color:"blue",onClick:ls,disabled:E||!C.trim()||!D.trim(),children:E?"Saving...":"Save"}),e.jsx(r,{color:"gray",onClick:fe,children:"Cancel"})]})]}),e.jsxs(c,{show:Qe,onClose:()=>g(!1),size:"md",children:[e.jsx(c.Header,{children:"Delete Zone"}),e.jsx(c.Body,{children:e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["Are you sure you want to delete zone ",e.jsx("strong",{children:A?.name}),"? This will also delete all records in this zone."]})}),e.jsxs(c.Footer,{children:[e.jsx(r,{color:"failure",onClick:as,children:"Delete"}),e.jsx(r,{color:"gray",onClick:()=>g(!1),children:"Cancel"})]})]}),e.jsxs(c,{show:Ue,onClose:()=>_(!1),size:"md",children:[e.jsx(c.Header,{children:"Delete Record"}),e.jsx(c.Body,{children:e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["Are you sure you want to delete record ",e.jsx("strong",{children:ue?.name}),"?"]})}),e.jsxs(c.Footer,{children:[e.jsx(r,{color:"failure",onClick:ts,children:"Delete"}),e.jsx(r,{color:"gray",onClick:()=>_(!1),children:"Cancel"})]})]})]})})]})]})}export{gs as Dns};
