import{j as e,y as F,A as C,C as M,L as i,S as B,T as A,B as O}from"./ui-vendor-BWxpC62h.js";import{u as D,r as a}from"./react-vendor-DKKOAuGG.js";import{u as P,S as w,N as E}from"./useMetrics-BYt4EkNN.js";import{a as I}from"./index-BbwIuudi.js";import"./http-vendor-B9ygI19o.js";function q(){const r=localStorage.getItem("access_token"),c=localStorage.getItem("username")||"Unknown",d=D(),[l,n]=a.useState(!1),[L,u]=a.useState(!0),[x,m]=a.useState(!1),[h,t]=a.useState(null),[f,o]=a.useState(null),[g,p]=a.useState(!0),[j,v]=a.useState(8001),[b,S]=a.useState(0),{connectionStatus:y}=P(r);a.useEffect(()=>{if(!r){d("/login");return}N()},[r]);const N=async()=>{u(!0),t(null);try{const s=await I.getAppriseConfig();p(s.enable),v(s.port),S(s.attachSize)}catch(s){t(s?.response?.data?.detail||s.message||"Failed to load Apprise configuration")}finally{u(!1)}},z=async()=>{m(!0),t(null),o(null);try{const s={enable:g,port:j,attachSize:b};await I.updateAppriseConfig(s),o("Apprise configuration saved successfully"),await N()}catch(s){t(s?.response?.data?.detail||s.message||"Failed to save Apprise configuration")}finally{m(!1)}},k=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("username"),d("/login")};return L?e.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx(w,{onLogout:k,isOpen:l,onClose:()=>n(!1)}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(E,{hostname:"nixos-router",username:c,connectionStatus:y,onMenuClick:()=>n(!l)}),e.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"text-center text-gray-600 dark:text-gray-400",children:"Loading..."})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx(w,{onLogout:k,isOpen:l,onClose:()=>n(!1)}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(E,{hostname:"nixos-router",username:c,connectionStatus:y,onMenuClick:()=>n(!l)}),e.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(F,{className:"w-8 h-8 mr-3 text-blue-600 dark:text-blue-400"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Apprise Notifications"})]}),h&&e.jsx(C,{color:"failure",className:"mb-4",onDismiss:()=>t(null),children:h}),f&&e.jsx(C,{color:"success",className:"mb-4",onDismiss:()=>o(null),children:f}),e.jsx(M,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"enable",className:"mb-2 block",children:"Enable Apprise"}),e.jsxs(B,{id:"enable",value:g?"true":"false",onChange:s=>p(s.target.value==="true"),children:[e.jsx("option",{value:"true",children:"Enabled"}),e.jsx("option",{value:"false",children:"Disabled"})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"port",className:"mb-2 block",children:"Port"}),e.jsx(A,{id:"port",type:"number",value:j,onChange:s=>v(parseInt(s.target.value)||8001)})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"attachSize",className:"mb-2 block",children:"Maximum Attachment Size (MB)"}),e.jsx(A,{id:"attachSize",type:"number",value:b,onChange:s=>S(parseInt(s.target.value)||0)}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Set to 0 to disable attachments"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(O,{onClick:z,disabled:x,children:x?"Saving...":"Save Configuration"})})]})})]})})]})]})}export{q as AppriseConfig};
