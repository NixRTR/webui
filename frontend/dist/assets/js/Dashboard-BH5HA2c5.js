import{j as e,C as r,P as d,a,b as l}from"./ui-vendor-DDQBv4x5.js";import{u as C,r as w}from"./react-vendor-DKKOAuGG.js";import{u as F,S,N as M}from"./useMetrics-BKoZYhxG.js";import{a as U}from"./index-Cc5GsNme.js";import"./http-vendor-B9ygI19o.js";function L(){const m=localStorage.getItem("access_token"),x=localStorage.getItem("username")||"Unknown",h=C(),[n,o]=w.useState(!1),{connectionStatus:j,system:t,interfaces:p,services:b}=F(m),u=async()=>{await U.logout(),h("/login")},f=s=>{const i=Math.floor(s/86400),y=Math.floor(s%86400/3600),v=Math.floor(s%3600/60);return`${i}d ${y}h ${v}m`},c=s=>(s/1073741824).toFixed(2)+" GB",g=p.filter(s=>["ppp0","br0","br1"].includes(s.interface)),N=s=>{switch(s){case"ppp0":return"WAN";case"br0":return"HOMELAB";case"br1":return"LAN";default:return s}},_=s=>{switch(s){case"ppp0":return"info";case"br0":return"success";case"br1":return"purple";default:return"gray"}};return e.jsxs("div",{className:"flex h-screen",children:[e.jsx(S,{onLogout:u,isOpen:n,onClose:()=>o(!1)}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(M,{hostname:"nixos-router",username:x,connectionStatus:j,onMenuClick:()=>o(!n)}),e.jsxs("main",{className:"flex-1 overflow-y-auto p-6 bg-gray-50 dark:bg-gray-900",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Dashboard"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs(r,{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"CPU Usage"}),e.jsxs("div",{className:"text-3xl font-bold mb-2",children:[t?.cpu_percent.toFixed(1),"%"]}),e.jsx(d,{progress:t?.cpu_percent||0,color:(t?.cpu_percent||0)>80?"red":(t?.cpu_percent||0)>60?"yellow":"blue"})]}),e.jsxs(r,{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Memory Usage"}),e.jsxs("div",{className:"text-3xl font-bold mb-2",children:[t?.memory_percent.toFixed(1),"%"]}),e.jsx(d,{progress:t?.memory_percent||0,color:(t?.memory_percent||0)>80?"red":(t?.memory_percent||0)>60?"yellow":"blue"}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:t&&`${(t.memory_used_mb/1024).toFixed(1)} / ${(t.memory_total_mb/1024).toFixed(1)} GB`})]}),e.jsxs(r,{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Load Average"}),e.jsx("div",{className:"text-3xl font-bold mb-2",children:t?.load_avg_1m.toFixed(2)}),e.jsxs("div",{className:"text-sm text-gray-500",children:["5min: ",t?.load_avg_5m.toFixed(2)," | 15min: ",t?.load_avg_15m.toFixed(2)]})]}),e.jsxs(r,{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Uptime"}),e.jsx("div",{className:"text-2xl font-bold",children:t&&f(t.uptime_seconds)})]})]}),e.jsxs(r,{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Network Interfaces"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:g.map(s=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-semibold",children:N(s.interface)}),e.jsx(a,{color:_(s.interface),size:"sm",children:s.interface})]}),e.jsx(a,{color:"success",size:"sm",children:"UP"})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"↓ Download:"}),e.jsxs("span",{className:"font-mono",children:[s.rx_rate_mbps?.toFixed(2)||"0.00"," Mbps"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"↑ Upload:"}),e.jsxs("span",{className:"font-mono",children:[s.tx_rate_mbps?.toFixed(2)||"0.00"," Mbps"]})]}),e.jsxs("div",{className:"flex justify-between text-gray-500",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{className:"font-mono text-xs",children:["↓",c(s.rx_bytes)," ↑",c(s.tx_bytes)]})]})]})]},s.interface))})]}),e.jsxs(r,{children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Services Status"}),e.jsxs(l,{children:[e.jsxs(l.Head,{children:[e.jsx(l.HeadCell,{children:"Service"}),e.jsx(l.HeadCell,{children:"Status"}),e.jsx(l.HeadCell,{children:"PID"}),e.jsx(l.HeadCell,{children:"CPU"}),e.jsx(l.HeadCell,{children:"Memory"})]}),e.jsx(l.Body,{className:"divide-y",children:b.map(s=>e.jsxs(l.Row,{children:[e.jsx(l.Cell,{className:"font-medium",children:s.service_name}),e.jsx(l.Cell,{children:e.jsx(a,{color:s.is_active?"success":"failure",children:s.is_active?"Running":"Stopped"})}),e.jsx(l.Cell,{children:s.pid||"-"}),e.jsxs(l.Cell,{children:[s.cpu_percent?.toFixed(1)||"-","%"]}),e.jsxs(l.Cell,{children:[s.memory_mb?.toFixed(0)||"-"," MB"]})]},s.service_name))})]})]})]})]})]})}export{L as Dashboard};
