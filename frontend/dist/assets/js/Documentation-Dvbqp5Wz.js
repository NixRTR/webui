import{j as s}from"./ui-vendor-9U_t4tWK.js";import{u as w,r}from"./react-vendor-DKKOAuGG.js";import{u as N,S as L,N as C}from"./useMetrics-D8oJpe8B.js";import{a as h}from"./index-Brk5Zdub.js";import"./http-vendor-B9ygI19o.js";function O(){const b=localStorage.getItem("access_token"),y=localStorage.getItem("username")||"Unknown",j=w(),[i,m]=r.useState(!1),[d,u]=r.useState(""),[g,p]=r.useState(!1),[c,x]=r.useState(null),{connectionStatus:k}=N(b);r.useEffect(()=>{$()},[]);const $=async()=>{p(!0),x(null);try{const n=await h.getDocumentation();u(n.content)}catch(n){x(n.response?.data?.detail||n.message||"Failed to fetch documentation"),u("")}finally{p(!1)}},v=async()=>{await h.logout(),j("/login")},S=n=>{let e=n;e=e.replace(/```(\w+)?\n([\s\S]*?)```/gim,'<pre class="bg-gray-100 dark:bg-gray-800 p-4 rounded overflow-x-auto"><code>$2</code></pre>'),e=e.replace(/^### (.*$)/gim,'<h3 class="text-xl font-bold mt-6 mb-3">$1</h3>'),e=e.replace(/^## (.*$)/gim,'<h2 class="text-2xl font-bold mt-8 mb-4">$1</h2>'),e=e.replace(/^# (.*$)/gim,'<h1 class="text-3xl font-bold mt-8 mb-4">$1</h1>'),e=e.replace(/\*\*(.*?)\*\*/gim,'<strong class="font-semibold">$1</strong>'),e=e.replace(/`([^`\n]+)`/gim,'<code class="bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded text-sm font-mono">$1</code>'),e=e.replace(/\[([^\]]+)\]\(([^)]+)\)/gim,'<a href="$2" target="_blank" rel="noopener noreferrer" class="text-blue-600 dark:text-blue-400 hover:underline">$1</a>');const f=e.split(`
`);let o=!1,a=[];for(let t=0;t<f.length;t++){const l=f[t];l.match(/^[\-\*] /)?(o||(a.push('<ul class="list-disc list-inside my-4 space-y-1">'),o=!0),a.push(`<li>${l.replace(/^[\-\*] /,"")}</li>`)):(o&&(a.push("</ul>"),o=!1),l.trim()&&a.push(l))}return o&&a.push("</ul>"),e=a.join(`
`),e=e.split(`

`).map(t=>(t=t.trim(),t&&!t.match(/^<[h|u|p|d|p]/)?`<p class="my-4">${t}</p>`:t)).join(`
`),e=e.replace(/\n/gim,"<br>"),e};return s.jsxs("div",{className:"flex h-screen",children:[s.jsx(L,{onLogout:v,isOpen:i,onClose:()=>m(!1)}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx(C,{hostname:"nixos-router",username:y,connectionStatus:k,onMenuClick:()=>m(!i)}),s.jsxs("main",{className:"flex-1 overflow-y-auto p-6 bg-gray-50 dark:bg-gray-900",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-6",children:"Documentation"}),g&&s.jsx("div",{className:"text-center py-16 text-gray-500",children:"Loading documentation..."}),c&&s.jsxs("div",{className:"text-center py-16 text-red-500",children:["Error: ",c]}),!g&&!c&&d&&s.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm text-gray-900 dark:text-gray-100",dangerouslySetInnerHTML:{__html:S(d)}})]})]})]})}export{O as Documentation};
