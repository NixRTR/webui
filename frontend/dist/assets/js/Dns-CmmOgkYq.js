import{j as e,r as os,A as x,C as Ie,a as o,B as r,s as Ve,t as $e,u as L,o as I,b as l,c as u,v as b,M as c,L as m,T as p,S as qe,w as ds}from"./ui-vendor-B64yKeUt.js";import{u as xs,a as n}from"./react-vendor-4URc7N9U.js";import{u as ms,S as hs,N as us}from"./useMetrics-Cg51oHeC.js";import{a as d}from"./index-JDH3Ux20.js";import{H as js}from"./HostnameEditModal-B0EOBgAG.js";import"./http-vendor-B9ygI19o.js";function ps(){const V=localStorage.getItem("access_token"),Ke=localStorage.getItem("username")||"Unknown",$=xs(),[Ce,Se]=n.useState(!1),[De,Ye]=n.useState([]),[Qe,He]=n.useState(!0),[_e,j]=n.useState(null),[q,Ue]=n.useState({}),[Re,Ee]=n.useState(null),[We,Ae]=n.useState(!1),[E,K]=n.useState(null),[w,Y]=n.useState(""),[Q,U]=n.useState("homelab"),[W,G]=n.useState(!0),[J,X]=n.useState(""),[ee,se]=n.useState(""),[ae,le]=n.useState(!0),[A,g]=n.useState(!1),[Fe,k]=n.useState(null),[Ge,Te]=n.useState(!1),[Je,Ze]=n.useState(!1),[i,te]=n.useState(null),[re,Me]=n.useState([]),[ne,ie]=n.useState(null),[C,ce]=n.useState(""),[S,oe]=n.useState("A"),[D,de]=n.useState(""),[xe,me]=n.useState(""),[he,ue]=n.useState(!0),[F,N]=n.useState(null),[Xe,y]=n.useState(!1),[es,H]=n.useState(!1),[T,_]=n.useState(null),[je,ge]=n.useState(null),[ye,ss]=n.useState([]),[ze,as]=n.useState({homelab:[],lan:[]}),[Pe,Be]=n.useState(!1),[Z,M]=n.useState(null),[R,Ne]=n.useState(null),[fe,ve]=n.useState(null),{connectionStatus:ls}=ms(V);n.useEffect(()=>{if(!V){$("/login");return}be(),Le(),Oe()},[V,$]);const Oe=async()=>{Be(!0),M(null);try{const[s,a,t]=await Promise.all([d.getDhcpNetworks(),d.getDnsDynamicEntries("homelab"),d.getDnsDynamicEntries("lan")]);ss(s),as({homelab:a,lan:t})}catch(s){const a=s&&typeof s=="object"&&"response"in s&&s.response&&typeof s.response=="object"&&"data"in s.response?String(s.response.data?.detail):s instanceof Error?s.message:"Failed to load dynamic DNS data";M(a)}finally{Be(!1)}},be=async()=>{He(!0),j(null);try{const s=await d.getDnsZones();Ye(s)}catch(s){j(s?.response?.data?.detail||s.message||"Failed to load DNS zones")}finally{He(!1)}},Le=async()=>{try{const[s,a]=await Promise.all([d.getDnsServiceStatus("homelab"),d.getDnsServiceStatus("lan")]);Ue({homelab:s,lan:a})}catch(s){console.error("Failed to fetch DNS service statuses:",s)}},h=async(s,a)=>{const t=`${s}-${a}`;Ee(t);try{await d.controlDnsService(s,a),setTimeout(()=>{Le()},1e3)}catch(v){j(v?.response?.data?.detail||v.message||`Failed to ${a} DNS service`)}finally{Ee(null)}},z=s=>{const a=q[s.network];return!a||!a.exists?{is_active:!1,is_enabled:!1}:{is_active:a.is_active,is_enabled:a.is_enabled}},P=async(s,a)=>{try{const t=await d.getDnsRecords(s,a);Me(t)}catch(t){j(t?.response?.data?.detail||t.message||"Failed to load DNS records")}},ts=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("username"),$("/login")},f=(s,a)=>{s?(K(s),Y(s.name),U(s.network),G(s.authoritative),X(s.forward_to||""),se(s.delegate_to||""),le(s.enabled)):(K(null),Y(""),U(a||"homelab"),G(!0),X(""),se(""),le(!0)),k(null),Ae(!0)},pe=()=>{Ae(!1),K(null),k(null)},rs=async()=>{k(null),g(!0);try{if(!w.trim()){k("Zone name is required"),g(!1);return}if(E){const s={name:w.trim(),network:Q,authoritative:W,forward_to:J.trim()||null,delegate_to:ee.trim()||null,enabled:ae};await d.updateDnsZone(E.name,E.network,s)}else{const s={name:w.trim(),network:Q,authoritative:W,forward_to:J.trim()||null,delegate_to:ee.trim()||null,enabled:ae};await d.createDnsZone(s)}await be(),pe()}catch(s){k(s?.response?.data?.detail||s.message||"Failed to save zone")}finally{g(!1)}},ns=async()=>{if(T)try{await d.deleteDnsZone(T.name,T.network),await be(),y(!1),_(null)}catch(s){j(s?.response?.data?.detail||s.message||"Failed to delete zone")}},B=async s=>{te(s),await P(s.name,s.network),Te(!0)},we=(s,a)=>{te(s),a?(ie(a),ce(a.name),oe(a.type),de(a.value),me(a.comment||""),ue(a.enabled)):(ie(null),ce(""),oe("A"),de(""),me(""),ue(!0)),N(null),Ze(!0)},O=()=>{Te(!1),te(null),Me([])},ke=()=>{Ze(!1),ie(null),N(null),i&&P(i.name,i.network)},is=async()=>{if(i){N(null),g(!0);try{if(!C.trim()){N("Record name is required"),g(!1);return}if(!D.trim()){N("Record value is required"),g(!1);return}if(ne){const s={name:C.trim(),type:S,value:D.trim(),comment:xe.trim()||null,enabled:he};await d.updateDnsRecord(ne.name,i.network,i.name,s)}else{const s={name:C.trim(),type:S,value:D.trim(),comment:xe.trim()||null,enabled:he};await d.createDnsRecord(i.name,i.network,s)}await P(i.name,i.network),ke()}catch(s){N(s?.response?.data?.detail||s.message||"Failed to save record")}finally{g(!1)}}},cs=async()=>{if(!(!je||!i))try{await d.deleteDnsRecord(je.name,i.network,i.name),await P(i.name,i.network),H(!1),ge(null)}catch(s){j(s?.response?.data?.detail||s.message||"Failed to delete record")}};return Qe?e.jsx("div",{className:"flex h-screen items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading DNS zones..."})]})}):e.jsxs("div",{className:"flex h-screen",children:[e.jsx(hs,{onLogout:ts,isOpen:Ce,onClose:()=>Se(!1)}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(us,{hostname:"nixos-router",username:Ke,connectionStatus:ls,onMenuClick:()=>Se(!Ce)}),e.jsx("main",{className:"flex-1 overflow-y-auto p-6 bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(os,{className:"w-8 h-8 text-gray-900 dark:text-white"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"DNS Management"})]})}),_e&&e.jsx(x,{color:"failure",className:"mb-6",onDismiss:()=>j(null),children:_e}),e.jsxs(Ie,{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"HOMELAB"}),(()=>{const s=q.homelab,t=Re?.startsWith("homelab-");return e.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[s&&e.jsx(o,{color:s.is_active?"success":"gray",size:"sm",children:s.is_active?"Running":s.is_enabled?"Stopped":"Disabled"}),e.jsx(r,{size:"xs",color:"success",onClick:()=>h("homelab","start"),disabled:t||(s?.is_active??!1),title:"Start Service",children:e.jsx(Ve,{className:"w-4 h-4"})}),e.jsx(r,{size:"xs",color:"failure",onClick:()=>h("homelab","stop"),disabled:t||!(s?.is_active??!1),title:"Stop Service",children:e.jsx($e,{className:"w-4 h-4"})}),e.jsx(r,{size:"xs",color:"warning",onClick:()=>h("homelab","reload"),disabled:t||!(s?.is_active??!1),title:"Reload Service",children:e.jsx(L,{className:"w-4 h-4"})}),e.jsx(r,{size:"xs",color:"purple",onClick:()=>h("homelab","restart"),disabled:t,title:"Restart Service",children:e.jsx(L,{className:"w-4 h-4"})})]})})()]}),e.jsx(r,{color:"blue",onClick:()=>f(void 0,"homelab"),children:"New Zone"})]}),(()=>{const s=De.filter(a=>a.network==="homelab");return s.length===0?e.jsx(x,{color:"info",icon:I,children:"No DNS zones configured for HOMELAB. Create a zone to get started."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden min-[1000px]:block overflow-x-auto",children:e.jsxs(l,{children:[e.jsxs(l.Head,{children:[e.jsx(l.HeadCell,{children:"Name"}),e.jsx(l.HeadCell,{children:"Authoritative"}),e.jsx(l.HeadCell,{children:"Forward To"}),e.jsx(l.HeadCell,{children:"Delegate To"}),e.jsx(l.HeadCell,{children:"Status"}),e.jsx(l.HeadCell,{children:"Actions"})]}),e.jsx(l.Body,{className:"divide-y",children:s.map(a=>e.jsxs(l.Row,{className:"bg-white dark:border-gray-700 dark:bg-gray-800",children:[e.jsx(l.Cell,{className:"whitespace-nowrap font-medium text-gray-900 dark:text-white",children:a.name}),e.jsx(l.Cell,{children:e.jsx(o,{color:a.authoritative?"success":"gray",children:a.authoritative?"Yes":"No"})}),e.jsx(l.Cell,{className:"text-gray-500 dark:text-gray-400",children:a.forward_to||"-"}),e.jsx(l.Cell,{className:"text-gray-500 dark:text-gray-400",children:a.delegate_to||"-"}),e.jsx(l.Cell,{children:(()=>{const t=z(a);return e.jsx(o,{color:t.is_active?"success":"gray",children:t.is_active?"Running":t.is_enabled?"Stopped":"Disabled"})})()}),e.jsx(l.Cell,{children:e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(r,{size:"xs",color:"blue",onClick:()=>B(a),children:"Records"}),e.jsx(r,{size:"xs",color:"gray",onClick:()=>f(a),children:e.jsx(u,{className:"w-4 h-4"})}),e.jsx(r,{size:"xs",color:"failure",onClick:()=>{_(a),y(!0)},children:e.jsx(b,{className:"w-4 h-4"})})]})})]},a.id))})]})}),e.jsx("div",{className:"min-[1000px]:hidden space-y-3",children:s.map(a=>{const t=z(a);return e.jsxs("div",{className:"p-4 rounded-lg border bg-white border-gray-200 dark:bg-gray-800 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"font-semibold text-lg mb-1 text-gray-900 dark:text-white",children:a.name})}),e.jsx(o,{color:t.is_active?"success":"gray",size:"sm",children:t.is_active?"Running":t.is_enabled?"Stopped":"Disabled"})]}),e.jsxs("div",{className:"space-y-2 text-sm mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Authoritative:"}),e.jsx(o,{color:a.authoritative?"success":"gray",size:"sm",children:a.authoritative?"Yes":"No"})]}),a.forward_to&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Forward To:"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-mono text-xs",children:a.forward_to})]}),a.delegate_to&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Delegate To:"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-mono text-xs",children:a.delegate_to})]})]}),e.jsx("div",{className:"pt-3 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex gap-2 mb-2 flex-wrap",children:[e.jsx(r,{size:"xs",color:"blue",onClick:()=>B(a),className:"flex-1 min-w-[80px]",children:"Records"}),e.jsx(r,{size:"xs",color:"gray",onClick:()=>f(a),className:"flex-1 min-w-[80px]",children:e.jsx(u,{className:"w-4 h-4"})}),e.jsx(r,{size:"xs",color:"failure",onClick:()=>{_(a),y(!0)},className:"flex-1 min-w-[80px]",children:e.jsx(b,{className:"w-4 h-4"})})]})})]},a.id)})})]})})(),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Dynamic DNS (DHCP clients)"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:["Read-only entries from DHCP leases. Configure ",e.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-1 rounded",children:"dynamic_domain"})," in DHCP for this network to enable."]}),Z&&e.jsx(x,{color:"failure",className:"mb-4",onDismiss:()=>M(null),children:Z}),Pe?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Loading…"}):(()=>{const s=ye.find(t=>t.network==="homelab")?.dynamic_domain??null,a=ze.homelab;return!s||s===""?e.jsxs(x,{color:"info",icon:I,children:["Dynamic DNS is disabled for this network. Set ",e.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-1 rounded",children:"dynamic_domain"})," in DHCP to enable."]}):a.length===0?e.jsx(x,{color:"info",children:"No dynamic DNS entries. Entries appear when DHCP clients have active leases."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(l,{children:[e.jsxs(l.Head,{children:[e.jsx(l.HeadCell,{children:"Hostname"}),e.jsx(l.HeadCell,{children:"FQDN"}),e.jsx(l.HeadCell,{children:"IP address"}),e.jsx(l.HeadCell,{children:"MAC"}),e.jsx(l.HeadCell,{children:"Actions"})]}),e.jsx(l.Body,{className:"divide-y",children:a.map((t,v)=>e.jsxs(l.Row,{className:"bg-white dark:border-gray-700 dark:bg-gray-800",children:[e.jsx(l.Cell,{className:"font-medium text-gray-900 dark:text-white",children:t.hostname}),e.jsx(l.Cell,{className:"text-gray-500 dark:text-gray-400 font-mono text-sm",children:t.hostname_fqdn}),e.jsx(l.Cell,{className:"text-gray-900 dark:text-white font-mono text-sm",children:t.ip_address}),e.jsx(l.Cell,{className:"text-gray-500 dark:text-gray-400 font-mono text-sm",children:t.mac_address}),e.jsx(l.Cell,{children:e.jsx(r,{size:"xs",color:"gray",onClick:()=>{Ne(t),ve("homelab")},title:"Edit hostname",children:e.jsx(u,{className:"w-4 h-4"})})})]},`${t.mac_address}-${v}`))})]})})})()]})]}),e.jsxs(Ie,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"LAN"}),(()=>{const s=q.lan,t=Re?.startsWith("lan-");return e.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[s&&e.jsx(o,{color:s.is_active?"success":"gray",size:"sm",children:s.is_active?"Running":s.is_enabled?"Stopped":"Disabled"}),e.jsx(r,{size:"xs",color:"success",onClick:()=>h("lan","start"),disabled:t||(s?.is_active??!1),title:"Start Service",children:e.jsx(Ve,{className:"w-4 h-4"})}),e.jsx(r,{size:"xs",color:"failure",onClick:()=>h("lan","stop"),disabled:t||!(s?.is_active??!1),title:"Stop Service",children:e.jsx($e,{className:"w-4 h-4"})}),e.jsx(r,{size:"xs",color:"warning",onClick:()=>h("lan","reload"),disabled:t||!(s?.is_active??!1),title:"Reload Service",children:e.jsx(L,{className:"w-4 h-4"})}),e.jsx(r,{size:"xs",color:"purple",onClick:()=>h("lan","restart"),disabled:t,title:"Restart Service",children:e.jsx(L,{className:"w-4 h-4"})})]})})()]}),e.jsx(r,{color:"blue",onClick:()=>f(void 0,"lan"),children:"New Zone"})]}),(()=>{const s=De.filter(a=>a.network==="lan");return s.length===0?e.jsx(x,{color:"info",icon:I,children:"No DNS zones configured for LAN. Create a zone to get started."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden min-[1000px]:block overflow-x-auto",children:e.jsxs(l,{children:[e.jsxs(l.Head,{children:[e.jsx(l.HeadCell,{children:"Name"}),e.jsx(l.HeadCell,{children:"Authoritative"}),e.jsx(l.HeadCell,{children:"Forward To"}),e.jsx(l.HeadCell,{children:"Delegate To"}),e.jsx(l.HeadCell,{children:"Status"}),e.jsx(l.HeadCell,{children:"Actions"})]}),e.jsx(l.Body,{className:"divide-y",children:s.map(a=>e.jsxs(l.Row,{className:"bg-white dark:border-gray-700 dark:bg-gray-800",children:[e.jsx(l.Cell,{className:"whitespace-nowrap font-medium text-gray-900 dark:text-white",children:a.name}),e.jsx(l.Cell,{children:e.jsx(o,{color:a.authoritative?"success":"gray",children:a.authoritative?"Yes":"No"})}),e.jsx(l.Cell,{className:"text-gray-500 dark:text-gray-400",children:a.forward_to||"-"}),e.jsx(l.Cell,{className:"text-gray-500 dark:text-gray-400",children:a.delegate_to||"-"}),e.jsx(l.Cell,{children:(()=>{const t=z(a);return e.jsx(o,{color:t.is_active?"success":"gray",children:t.is_active?"Running":t.is_enabled?"Stopped":"Disabled"})})()}),e.jsx(l.Cell,{children:e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(r,{size:"xs",color:"blue",onClick:()=>B(a),children:"Records"}),e.jsx(r,{size:"xs",color:"gray",onClick:()=>f(a),children:e.jsx(u,{className:"w-4 h-4"})}),e.jsx(r,{size:"xs",color:"failure",onClick:()=>{_(a),y(!0)},children:e.jsx(b,{className:"w-4 h-4"})})]})})]},a.id))})]})}),e.jsx("div",{className:"min-[1000px]:hidden space-y-3",children:s.map(a=>{const t=z(a);return e.jsxs("div",{className:"p-4 rounded-lg border bg-white border-gray-200 dark:bg-gray-800 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"font-semibold text-lg mb-1 text-gray-900 dark:text-white",children:a.name})}),e.jsx(o,{color:t.is_active?"success":"gray",size:"sm",children:t.is_active?"Running":t.is_enabled?"Stopped":"Disabled"})]}),e.jsxs("div",{className:"space-y-2 text-sm mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Authoritative:"}),e.jsx(o,{color:a.authoritative?"success":"gray",size:"sm",children:a.authoritative?"Yes":"No"})]}),a.forward_to&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Forward To:"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-mono text-xs",children:a.forward_to})]}),a.delegate_to&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Delegate To:"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-mono text-xs",children:a.delegate_to})]})]}),e.jsx("div",{className:"pt-3 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex gap-2 mb-2 flex-wrap",children:[e.jsx(r,{size:"xs",color:"blue",onClick:()=>B(a),className:"flex-1 min-w-[80px]",children:"Records"}),e.jsx(r,{size:"xs",color:"gray",onClick:()=>f(a),className:"flex-1 min-w-[80px]",children:e.jsx(u,{className:"w-4 h-4"})}),e.jsx(r,{size:"xs",color:"failure",onClick:()=>{_(a),y(!0)},className:"flex-1 min-w-[80px]",children:e.jsx(b,{className:"w-4 h-4"})})]})})]},a.id)})})]})})(),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Dynamic DNS (DHCP clients)"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:["Read-only entries from DHCP leases. Configure ",e.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-1 rounded",children:"dynamic_domain"})," in DHCP for this network to enable."]}),Z&&e.jsx(x,{color:"failure",className:"mb-4",onDismiss:()=>M(null),children:Z}),Pe?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Loading…"}):(()=>{const s=ye.find(t=>t.network==="lan")?.dynamic_domain??null,a=ze.lan;return!s||s===""?e.jsxs(x,{color:"info",icon:I,children:["Dynamic DNS is disabled for this network. Set ",e.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-1 rounded",children:"dynamic_domain"})," in DHCP to enable."]}):a.length===0?e.jsx(x,{color:"info",children:"No dynamic DNS entries. Entries appear when DHCP clients have active leases."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(l,{children:[e.jsxs(l.Head,{children:[e.jsx(l.HeadCell,{children:"Hostname"}),e.jsx(l.HeadCell,{children:"FQDN"}),e.jsx(l.HeadCell,{children:"IP address"}),e.jsx(l.HeadCell,{children:"MAC"}),e.jsx(l.HeadCell,{children:"Actions"})]}),e.jsx(l.Body,{className:"divide-y",children:a.map((t,v)=>e.jsxs(l.Row,{className:"bg-white dark:border-gray-700 dark:bg-gray-800",children:[e.jsx(l.Cell,{className:"font-medium text-gray-900 dark:text-white",children:t.hostname}),e.jsx(l.Cell,{className:"text-gray-500 dark:text-gray-400 font-mono text-sm",children:t.hostname_fqdn}),e.jsx(l.Cell,{className:"text-gray-900 dark:text-white font-mono text-sm",children:t.ip_address}),e.jsx(l.Cell,{className:"text-gray-500 dark:text-gray-400 font-mono text-sm",children:t.mac_address}),e.jsx(l.Cell,{children:e.jsx(r,{size:"xs",color:"gray",onClick:()=>{Ne(t),ve("lan")},title:"Edit hostname",children:e.jsx(u,{className:"w-4 h-4"})})})]},`${t.mac_address}-${v}`))})]})})})()]})]}),R&&fe&&e.jsx(js,{show:!!R,onClose:()=>{Ne(null),ve(null)},currentHostname:R.hostname,dynamicDomain:ye.find(s=>s.network===fe)?.dynamic_domain??null,network:fe,macAddress:R.mac_address,ipAddress:R.ip_address,onSaved:Oe}),e.jsxs(c,{show:We,onClose:pe,size:"lg",children:[e.jsx(c.Header,{children:E?"Edit DNS Zone":"Create DNS Zone"}),e.jsx(c.Body,{className:"max-h-[70vh] overflow-y-auto",children:e.jsxs("div",{className:"space-y-4",children:[Fe&&e.jsx(x,{color:"failure",children:Fe}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"zoneName",value:"Zone Name *"}),e.jsx(p,{id:"zoneName",value:w,onChange:s=>Y(s.target.value),placeholder:"example.com",required:!0,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"zoneNetwork",value:"Network *"}),e.jsxs(qe,{id:"zoneNetwork",value:Q,onChange:s=>U(s.target.value),className:"mt-1",children:[e.jsx("option",{value:"homelab",children:"HOMELAB"}),e.jsx("option",{value:"lan",children:"LAN"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"zoneAuthoritative",checked:W,onChange:s=>G(s.target.checked),className:"w-4 h-4"}),e.jsx(m,{htmlFor:"zoneAuthoritative",value:"Authoritative (serve locally)"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"zoneForwardTo",value:"Forward To (optional)"}),e.jsx(p,{id:"zoneForwardTo",value:J,onChange:s=>X(s.target.value),placeholder:"192.168.1.1",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"zoneDelegateTo",value:"Delegate To (optional)"}),e.jsx(p,{id:"zoneDelegateTo",value:ee,onChange:s=>se(s.target.value),placeholder:"ns1.example.com",className:"mt-1"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"zoneEnabled",checked:ae,onChange:s=>le(s.target.checked),className:"w-4 h-4"}),e.jsx(m,{htmlFor:"zoneEnabled",value:"Enabled"})]})]})}),e.jsxs(c.Footer,{children:[e.jsx(r,{color:"blue",onClick:rs,disabled:A||!w.trim(),children:A?"Saving...":"Save"}),e.jsx(r,{color:"gray",onClick:pe,children:"Cancel"})]})]}),e.jsxs(c,{show:Ge,onClose:O,size:"4xl",children:[e.jsx(c.Header,{children:i?`${i.network.toUpperCase()} DNS Records - ${i.name}`:"DNS Records"}),e.jsx(c.Body,{className:"max-h-[80vh] overflow-y-auto",children:e.jsxs("div",{className:"space-y-4",children:[F&&e.jsx(x,{color:"failure",children:F}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Records"}),i&&e.jsxs(r,{size:"sm",color:"blue",onClick:()=>we(i),children:[e.jsx(ds,{className:"w-4 h-4 mr-1"}),"Add Record"]})]}),re.length===0?e.jsx(x,{color:"info",children:"No records in this zone. Add a record to get started."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden min-[1000px]:block overflow-x-auto",children:e.jsxs(l,{children:[e.jsxs(l.Head,{children:[e.jsx(l.HeadCell,{children:"Name"}),e.jsx(l.HeadCell,{children:"Type"}),e.jsx(l.HeadCell,{children:"Value"}),e.jsx(l.HeadCell,{children:"Comment"}),e.jsx(l.HeadCell,{children:"Status"}),e.jsx(l.HeadCell,{children:"Actions"})]}),e.jsx(l.Body,{className:"divide-y",children:re.map(s=>e.jsxs(l.Row,{className:"bg-white dark:border-gray-700 dark:bg-gray-800",children:[e.jsx(l.Cell,{className:"font-medium text-gray-900 dark:text-white",children:s.name}),e.jsx(l.Cell,{children:e.jsx(o,{color:s.type==="A"?"blue":"purple",children:s.type})}),e.jsx(l.Cell,{className:"font-mono text-sm text-gray-900 dark:text-white",children:s.value}),e.jsx(l.Cell,{className:"text-gray-500 dark:text-gray-400",children:s.comment||"-"}),e.jsx(l.Cell,{children:e.jsx(o,{color:s.enabled?"success":"gray",children:s.enabled?"Enabled":"Disabled"})}),e.jsx(l.Cell,{children:e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(r,{size:"xs",color:"gray",onClick:()=>{O(),we(i,s)},children:e.jsx(u,{className:"w-4 h-4"})}),e.jsx(r,{size:"xs",color:"failure",onClick:()=>{ge(s),H(!0)},children:e.jsx(b,{className:"w-4 h-4"})})]})})]},s.id))})]})}),e.jsx("div",{className:"min-[1000px]:hidden space-y-3",children:re.map(s=>e.jsxs("div",{className:"p-3 rounded-lg border bg-white border-gray-200 dark:bg-gray-800 dark:border-gray-700",children:[e.jsx("div",{className:"flex justify-between items-start mb-2",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:s.name}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(o,{color:s.type==="A"?"blue":"purple",size:"sm",children:s.type}),e.jsx(o,{color:s.enabled?"success":"gray",size:"sm",children:s.enabled?"Enabled":"Disabled"})]})]})}),e.jsxs("div",{className:"space-y-1 text-sm mb-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Value:"}),e.jsx("span",{className:"font-mono text-xs text-gray-900 dark:text-gray-100 break-all",children:s.value})]}),s.comment&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Comment:"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 text-xs",children:s.comment})]})]}),e.jsxs("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700 flex gap-2",children:[e.jsx(r,{size:"xs",color:"gray",onClick:()=>{O(),we(i,s)},className:"flex-1",children:e.jsx(u,{className:"w-4 h-4"})}),e.jsx(r,{size:"xs",color:"failure",onClick:()=>{ge(s),H(!0)},className:"flex-1",children:e.jsx(b,{className:"w-4 h-4"})})]})]},s.id))})]})]})}),e.jsx(c.Footer,{children:e.jsx(r,{color:"gray",onClick:O,children:"Close"})})]}),e.jsxs(c,{show:Je,onClose:ke,size:"lg",children:[e.jsx(c.Header,{children:ne?"Edit DNS Record":"Create DNS Record"}),e.jsx(c.Body,{className:"max-h-[70vh] overflow-y-auto",children:e.jsxs("div",{className:"space-y-4",children:[F&&e.jsx(x,{color:"failure",children:F}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"recordName",value:"Record Name *"}),e.jsx(p,{id:"recordName",value:C,onChange:s=>ce(s.target.value),placeholder:"hostname.example.com",required:!0,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"recordType",value:"Record Type *"}),e.jsxs(qe,{id:"recordType",value:S,onChange:s=>oe(s.target.value),className:"mt-1",children:[e.jsx("option",{value:"A",children:"A (IPv4 Address)"}),e.jsx("option",{value:"CNAME",children:"CNAME (Alias)"})]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"recordValue",value:S==="A"?"IP Address *":"Target Hostname *"}),e.jsx(p,{id:"recordValue",value:D,onChange:s=>de(s.target.value),placeholder:S==="A"?"192.168.1.1":"target.example.com",required:!0,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"recordComment",value:"Comment (optional)"}),e.jsx(p,{id:"recordComment",value:xe,onChange:s=>me(s.target.value),className:"mt-1"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"recordEnabled",checked:he,onChange:s=>ue(s.target.checked),className:"w-4 h-4"}),e.jsx(m,{htmlFor:"recordEnabled",value:"Enabled"})]})]})}),e.jsxs(c.Footer,{children:[e.jsx(r,{color:"blue",onClick:is,disabled:A||!C.trim()||!D.trim(),children:A?"Saving...":"Save"}),e.jsx(r,{color:"gray",onClick:ke,children:"Cancel"})]})]}),e.jsxs(c,{show:Xe,onClose:()=>y(!1),size:"md",children:[e.jsx(c.Header,{children:"Delete Zone"}),e.jsx(c.Body,{children:e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["Are you sure you want to delete zone ",e.jsx("strong",{children:T?.name}),"? This will also delete all records in this zone."]})}),e.jsxs(c.Footer,{children:[e.jsx(r,{color:"failure",onClick:ns,children:"Delete"}),e.jsx(r,{color:"gray",onClick:()=>y(!1),children:"Cancel"})]})]}),e.jsxs(c,{show:es,onClose:()=>H(!1),size:"md",children:[e.jsx(c.Header,{children:"Delete Record"}),e.jsx(c.Body,{children:e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["Are you sure you want to delete record ",e.jsx("strong",{children:je?.name}),"?"]})}),e.jsxs(c.Footer,{children:[e.jsx(r,{color:"failure",onClick:cs,children:"Delete"}),e.jsx(r,{color:"gray",onClick:()=>H(!1),children:"Cancel"})]})]})]})})]})]})}export{ps as Dns};
